<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta property="og:url" content="https://newzone.top/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html"><meta property="og:site_name" content="æŒ¨è¸¢ç‰›é©¬"><meta property="og:title" content="MyBatis"><meta property="og:description" content="MyBatis åŸºæœ¬ä»‹ç» ORMï¼ˆObject Relational Mappingï¼‰ï¼š å¯¹è±¡å…³ç³»æ˜ å°„ï¼ŒæŒ‡çš„æ˜¯æŒä¹…åŒ–æ•°æ®å’Œå®ä½“å¯¹è±¡çš„æ˜ å°„æ¨¡å¼ï¼Œè§£å†³é¢å‘å¯¹è±¡ä¸å…³ç³»å‹æ•°æ®åº“å­˜åœ¨çš„äº’ä¸åŒ¹é…çš„ç°è±¡ MyBatisï¼š"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-08-16T07:46:55.000Z"><meta property="article:author" content="æŒ¨è¸¢ç‰›é©¬"><meta property="article:modified_time" content="2023-08-16T07:46:55.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"MyBatis","image":[""],"dateModified":"2023-08-16T07:46:55.000Z","author":[{"@type":"Person","name":"æŒ¨è¸¢ç‰›é©¬","url":"https://newzone.top"}]}</script><link rel="alternate" type="application/rss+xml" href="https://newzone.top/rss.xml" title="æŒ¨è¸¢ç‰›é©¬ RSS Feed"><title>MyBatis | æŒ¨è¸¢ç‰›é©¬</title><meta name="description" content="MyBatis åŸºæœ¬ä»‹ç» ORMï¼ˆObject Relational Mappingï¼‰ï¼š å¯¹è±¡å…³ç³»æ˜ å°„ï¼ŒæŒ‡çš„æ˜¯æŒä¹…åŒ–æ•°æ®å’Œå®ä½“å¯¹è±¡çš„æ˜ å°„æ¨¡å¼ï¼Œè§£å†³é¢å‘å¯¹è±¡ä¸å…³ç³»å‹æ•°æ®åº“å­˜åœ¨çš„äº’ä¸åŒ¹é…çš„ç°è±¡ MyBatisï¼š">
    <meta name="keywords" content="è‡ªæˆ‘æå‡,æ•ˆç‡æå‡,å¼€æºå·¥å…·,å­¦ä¹ ç¬”è®°" />
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #252232;
      }

      html,
      body {
        background: var(--bg-color);
      }
      .wwads-cn * {
        color: var(--text-color) !important;
      }
      @media screen and (max-width: 1300px) {
        .wwads-cn {
          display: none;
        }
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-962fc479.css" as="style"><link rel="stylesheet" href="/assets/style-962fc479.css">
    <link rel="modulepreload" href="/assets/app-3aac6385.js"><link rel="modulepreload" href="/assets/MyBatis.html-cb25e492.js"><link rel="modulepreload" href="/assets/MyBatis.html-d33d8057.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js">
    <!-- <script type="text/javascript" charset="UTF-8" src="https://cdn.wwads.cn/js/makemoney.js" async></script> -->
	  <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7585955822109216"
     crossorigin="anonymous"></script> -->
    <!-- Matomo æ­¤åŒºå—ä¸ºç»Ÿè®¡ä»£ç ï¼Œè¯·åˆ é™¤-->
    <script>
      var _paq = window._paq = window._paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="https://piwik.seoipo.com/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '7']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Matomo Code æ­¤åŒºå—ä¸ºç»Ÿè®¡ä»£ç ï¼Œè¯·åˆ é™¤-->
  </head>
  <body>
    <!-- <div class="wwads-cn wwads-vertical wwads-sticky" data-id="255" data-sticky-position="left" style="max-width:180px; background-color:var(--bg-color);"></div> -->
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/æ©˜çŒ«.jpeg" alt="æŒ¨è¸¢ç‰›é©¬"><!----><span class="vp-site-name hide-in-pad">æŒ¨è¸¢ç‰›é©¬</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Contact"><span class="title"><span class="font-icon icon iconfont icon-advance" style=""></span>Contact</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="https://img.newzone.top/wechat.svg" rel="noopener noreferrer" target="_blank" aria-label="å¾®ä¿¡" class="nav-link"><span class="font-icon icon iconfont icon-wechat" style=""></span>å¾®ä¿¡<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="mailto:learndata@newzone.top" aria-label="Email" class="nav-link"><span class="font-icon icon iconfont icon-alias" style=""></span>Email<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">æœç´¢</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">ğŸ§° Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">ğŸŒ æ•°æ®åº“</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">ğŸ—ï¸ ä¸­é—´ä»¶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">ğŸ‹ Springå…¨å®¶æ¡¶</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html"><!---->MyBatis<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#åŸºæœ¬ä»‹ç»"><!---->åŸºæœ¬ä»‹ç»<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#åŸºæœ¬æ“ä½œ"><!---->åŸºæœ¬æ“ä½œ<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#ç›¸å…³api"><!---->ç›¸å…³API<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#æ˜ å°„é…ç½®"><!---->æ˜ å°„é…ç½®<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#æ ¸å¿ƒé…ç½®"><!---->æ ¸å¿ƒé…ç½®<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#å’Œ"><!---->#{}å’Œ${}<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#æ—¥å¿—æ–‡ä»¶"><!---->æ—¥å¿—æ–‡ä»¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#ä»£ç å®ç°"><!---->ä»£ç å®ç°<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#æ‰¹é‡æ“ä½œ"><!---->æ‰¹é‡æ“ä½œ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#ä»£ç†å¼€å‘"><!---->ä»£ç†å¼€å‘<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#ä»£ç†è§„åˆ™"><!---->ä»£ç†è§„åˆ™<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#å®ç°åŸç†"><!---->å®ç°åŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#ç»“æœæ˜ å°„"><!---->ç»“æœæ˜ å°„<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#ç›¸å…³æ ‡ç­¾"><!---->ç›¸å…³æ ‡ç­¾<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#åµŒå¥—æŸ¥è¯¢"><!---->åµŒå¥—æŸ¥è¯¢<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#å¤šè¡¨æŸ¥è¯¢"><!---->å¤šè¡¨æŸ¥è¯¢<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#é‰´åˆ«å™¨"><!---->é‰´åˆ«å™¨<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#å»¶è¿ŸåŠ è½½"><!---->å»¶è¿ŸåŠ è½½<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#æ³¨è§£å¼€å‘"><!---->æ³¨è§£å¼€å‘<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#å•è¡¨æ“ä½œ"><!---->å•è¡¨æ“ä½œ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#å¤šè¡¨æ“ä½œ"><!---->å¤šè¡¨æ“ä½œ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#ç¼“å­˜æœºåˆ¶"><!---->ç¼“å­˜æœºåˆ¶<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#ç¼“å­˜æ¦‚è¿°"><!---->ç¼“å­˜æ¦‚è¿°<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#ä¸€çº§ç¼“å­˜"><!---->ä¸€çº§ç¼“å­˜<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#äºŒçº§ç¼“å­˜"><!---->äºŒçº§ç¼“å­˜<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#è‡ªå®šä¹‰"><!---->è‡ªå®šä¹‰<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#æ„é€ è¯­å¥"><!---->æ„é€ è¯­å¥<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#åŠ¨æ€-sql"><!---->åŠ¨æ€ SQL<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#é€†å‘å·¥ç¨‹"><!---->é€†å‘å·¥ç¨‹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#æ„å»º-sql"><!---->æ„å»º SQL<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#è¿è¡ŒåŸç†"><!---->è¿è¡ŒåŸç†<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#è¿è¡Œæœºåˆ¶"><!---->è¿è¡Œæœºåˆ¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#è·å–å·¥å‚"><!---->è·å–å·¥å‚<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#è·å–ä¼šè¯"><!---->è·å–ä¼šè¯<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#è·å–ä»£ç†"><!---->è·å–ä»£ç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#æ‰§è¡Œsql"><!---->æ‰§è¡ŒSQL<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#æ’ä»¶ä½¿ç”¨"><!---->æ’ä»¶ä½¿ç”¨<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#æ’ä»¶åŸç†"><!---->æ’ä»¶åŸç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#åˆ†é¡µæ’ä»¶"><!---->åˆ†é¡µæ’ä»¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#åˆ†é¡µæ“ä½œ"><!---->åˆ†é¡µæ“ä½œ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html#å‚æ•°è·å–"><!---->å‚æ•°è·å–<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/Spring.html"><!---->Spring<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringBoot.html"><!---->SpringBoot<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringCloud.html"><!---->SpringCloud<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/SpringMVC.html"><!---->SpringMVC<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">ğŸ‹ å¹¶å‘åŒ…</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">ğŸ‹ å·¥å…·</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">ğŸ‹ JavaWeb</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->MyBatis</h1><div class="page-info"><!----><!----><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 14160 å­—</span><meta property="wordCount" content="14160"></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 47 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT47M"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="waline-pageview-count" data-path="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/MyBatis.html">...</span></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#åŸºæœ¬ä»‹ç»">åŸºæœ¬ä»‹ç»</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#åŸºæœ¬æ“ä½œ">åŸºæœ¬æ“ä½œ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#ç›¸å…³api">ç›¸å…³API</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#æ˜ å°„é…ç½®">æ˜ å°„é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#æ ¸å¿ƒé…ç½®">æ ¸å¿ƒé…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#å’Œ">#{}å’Œ${}</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#æ—¥å¿—æ–‡ä»¶">æ—¥å¿—æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#ä»£ç å®ç°">ä»£ç å®ç°</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#æ‰¹é‡æ“ä½œ">æ‰¹é‡æ“ä½œ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#ä»£ç†å¼€å‘">ä»£ç†å¼€å‘</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#ä»£ç†è§„åˆ™">ä»£ç†è§„åˆ™</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#å®ç°åŸç†">å®ç°åŸç†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#ç»“æœæ˜ å°„">ç»“æœæ˜ å°„</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#ç›¸å…³æ ‡ç­¾">ç›¸å…³æ ‡ç­¾</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#åµŒå¥—æŸ¥è¯¢">åµŒå¥—æŸ¥è¯¢</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#å¤šè¡¨æŸ¥è¯¢">å¤šè¡¨æŸ¥è¯¢</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#é‰´åˆ«å™¨">é‰´åˆ«å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#å»¶è¿ŸåŠ è½½">å»¶è¿ŸåŠ è½½</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#æ³¨è§£å¼€å‘">æ³¨è§£å¼€å‘</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#å•è¡¨æ“ä½œ">å•è¡¨æ“ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#å¤šè¡¨æ“ä½œ">å¤šè¡¨æ“ä½œ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#ç¼“å­˜æœºåˆ¶">ç¼“å­˜æœºåˆ¶</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#ç¼“å­˜æ¦‚è¿°">ç¼“å­˜æ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#ä¸€çº§ç¼“å­˜">ä¸€çº§ç¼“å­˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#äºŒçº§ç¼“å­˜">äºŒçº§ç¼“å­˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#è‡ªå®šä¹‰">è‡ªå®šä¹‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#æ„é€ è¯­å¥">æ„é€ è¯­å¥</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#åŠ¨æ€-sql">åŠ¨æ€ SQL</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#é€†å‘å·¥ç¨‹">é€†å‘å·¥ç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#æ„å»º-sql">æ„å»º SQL</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#è¿è¡ŒåŸç†">è¿è¡ŒåŸç†</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#è¿è¡Œæœºåˆ¶">è¿è¡Œæœºåˆ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#è·å–å·¥å‚">è·å–å·¥å‚</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#è·å–ä¼šè¯">è·å–ä¼šè¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#è·å–ä»£ç†">è·å–ä»£ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#æ‰§è¡Œsql">æ‰§è¡ŒSQL</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#æ’ä»¶ä½¿ç”¨">æ’ä»¶ä½¿ç”¨</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#æ’ä»¶åŸç†">æ’ä»¶åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#åˆ†é¡µæ’ä»¶">åˆ†é¡µæ’ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#åˆ†é¡µæ“ä½œ">åˆ†é¡µæ“ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#å‚æ•°è·å–">å‚æ•°è·å–</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="mybatis" tabindex="-1"><a class="header-anchor" href="#mybatis" aria-hidden="true">#</a> MyBatis</h1><h2 id="åŸºæœ¬ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ä»‹ç»" aria-hidden="true">#</a> åŸºæœ¬ä»‹ç»</h2><p>ORMï¼ˆObject Relational Mappingï¼‰ï¼š å¯¹è±¡å…³ç³»æ˜ å°„ï¼ŒæŒ‡çš„æ˜¯æŒä¹…åŒ–æ•°æ®å’Œå®ä½“å¯¹è±¡çš„æ˜ å°„æ¨¡å¼ï¼Œè§£å†³é¢å‘å¯¹è±¡ä¸å…³ç³»å‹æ•°æ®åº“å­˜åœ¨çš„äº’ä¸åŒ¹é…çš„ç°è±¡</p><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/MyBatis-ORMä»‹ç».png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>MyBatis</strong>ï¼š</p><ul><li><p>MyBatis æ˜¯ä¸€ä¸ªä¼˜ç§€çš„åŸºäº Java çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒå†…éƒ¨å°è£…äº† JDBCï¼Œä½¿å¼€å‘è€…åªéœ€å…³æ³¨ SQL è¯­å¥æœ¬èº«ï¼Œè€Œä¸éœ€è¦èŠ±è´¹ç²¾åŠ›å»å¤„ç†åŠ è½½é©±åŠ¨ã€åˆ›å»ºè¿æ¥ã€åˆ›å»º Statement ç­‰è¿‡ç¨‹ã€‚</p></li><li><p>MyBatis é€šè¿‡ XML æˆ–æ³¨è§£çš„æ–¹å¼å°†è¦æ‰§è¡Œçš„å„ç§ Statement é…ç½®èµ·æ¥ï¼Œå¹¶é€šè¿‡ Java å¯¹è±¡å’Œ Statement ä¸­ SQL çš„åŠ¨æ€å‚æ•°è¿›è¡Œæ˜ å°„ç”Ÿæˆæœ€ç»ˆæ‰§è¡Œçš„ SQL è¯­å¥ã€‚</p></li><li><p>MyBatis æ¡†æ¶æ‰§è¡Œ SQL å¹¶å°†ç»“æœæ˜ å°„ä¸º Java å¯¹è±¡å¹¶è¿”å›ã€‚é‡‡ç”¨ ORM æ€æƒ³è§£å†³äº†å®ä½“å’Œæ•°æ®åº“æ˜ å°„çš„é—®é¢˜ï¼Œå¯¹ JDBC è¿›è¡Œäº†å°è£…ï¼Œå±è”½äº† JDBC åº•å±‚ API çš„è°ƒç”¨ç»†èŠ‚ï¼Œä½¿æˆ‘ä»¬ä¸ç”¨æ“ä½œ JDBC APIï¼Œå°±å¯ä»¥å®Œæˆå¯¹æ•°æ®åº“çš„æŒä¹…åŒ–æ“ä½œã€‚</p></li></ul><p>MyBatis å®˜ç½‘åœ°å€ï¼š<a href="http://www.mybatis.org/mybatis-3/" target="_blank" rel="noopener noreferrer">http://www.mybatis.org/mybatis-3/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å‚è€ƒè§†é¢‘ï¼š<a href="https://space.bilibili.com/37974444/" target="_blank" rel="noopener noreferrer">https://space.bilibili.com/37974444/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><h2 id="åŸºæœ¬æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ“ä½œ" aria-hidden="true">#</a> åŸºæœ¬æ“ä½œ</h2><h3 id="ç›¸å…³api" tabindex="-1"><a class="header-anchor" href="#ç›¸å…³api" aria-hidden="true">#</a> ç›¸å…³API</h3><p>Resourcesï¼šåŠ è½½èµ„æºçš„å·¥å…·ç±»</p><ul><li><code>InputStream getResourceAsStream(String fileName)</code>ï¼šé€šè¿‡ç±»åŠ è½½å™¨è¿”å›æŒ‡å®šèµ„æºçš„å­—èŠ‚æµ <ul><li>å‚æ•° fileName æ˜¯æ”¾åœ¨ src çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶åï¼šMyBatisConfig.xml</li></ul></li></ul><p>SqlSessionFactoryBuilderï¼šæ„å»ºå™¨ï¼Œç”¨æ¥è·å– SqlSessionFactory å·¥å‚å¯¹è±¡</p><ul><li><code>SqlSessionFactory build(InputStream is)</code>ï¼šé€šè¿‡æŒ‡å®šèµ„æºçš„å­—èŠ‚è¾“å…¥æµè·å– SqlSession å·¥å‚å¯¹è±¡</li></ul><p>SqlSessionFactoryï¼šè·å– SqlSession æ„å»ºè€…å¯¹è±¡çš„å·¥å‚æ¥å£</p><ul><li><code>SqlSession openSession()</code>ï¼šè·å– SqlSession æ„å»ºè€…å¯¹è±¡ï¼Œå¹¶å¼€å¯æ‰‹åŠ¨æäº¤äº‹åŠ¡</li><li><code>SqlSession openSession(boolean)</code>ï¼šè·å– SqlSession æ„å»ºè€…å¯¹è±¡ï¼Œå‚æ•°ä¸º true å¼€å¯è‡ªåŠ¨æäº¤äº‹åŠ¡</li></ul><p>SqlSessionï¼šæ„å»ºè€…å¯¹è±¡æ¥å£ï¼Œç”¨äºæ‰§è¡Œ SQLã€ç®¡ç†äº‹åŠ¡ã€æ¥å£ä»£ç†</p><ul><li>SqlSession <strong>ä»£è¡¨å’Œæ•°æ®åº“çš„ä¸€æ¬¡ä¼šè¯</strong>ï¼Œç”¨å®Œå¿…é¡»å…³é—­</li><li>SqlSession å’Œ Connection ä¸€æ ·éƒ½æ˜¯éçº¿ç¨‹å®‰å…¨ï¼Œæ¯æ¬¡ä½¿ç”¨éƒ½åº”è¯¥å»è·å–æ–°çš„å¯¹è±¡</li></ul><p>æ³¨ï¼š<strong>update æ•°æ®éœ€è¦æäº¤äº‹åŠ¡ï¼Œæˆ–å¼€å¯é»˜è®¤æäº¤</strong></p><p>SqlSession å¸¸ç”¨ APIï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>List&lt;E&gt; selectList(String statement,Object parameter)</td><td>æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œè¿”å›Listé›†åˆ</td></tr><tr><td>T selectOne(String statement,Object parameter)</td><td>æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œè¿”å›ä¸€ä¸ªç»“æœå¯¹è±¡</td></tr><tr><td>int insert(String statement,Object parameter)</td><td>æ‰§è¡Œæ–°å¢è¯­å¥ï¼Œè¿”å›å½±å“è¡Œæ•°</td></tr><tr><td>int update(String statement,Object parameter)</td><td>æ‰§è¡Œåˆ é™¤è¯­å¥ï¼Œè¿”å›å½±å“è¡Œæ•°</td></tr><tr><td>int delete(String statement,Object parameter)</td><td>æ‰§è¡Œä¿®æ”¹è¯­å¥ï¼Œè¿”å›å½±å“è¡Œæ•°</td></tr><tr><td>void commit()</td><td>æäº¤äº‹åŠ¡</td></tr><tr><td>void rollback()</td><td>å›æ»šäº‹åŠ¡</td></tr><tr><td>T getMapper(Class&lt;T&gt; cls)</td><td>è·å–æŒ‡å®šæ¥å£çš„ä»£ç†å®ç°ç±»å¯¹è±¡</td></tr><tr><td>void close()</td><td>é‡Šæ”¾èµ„æº</td></tr></tbody></table><hr><h3 id="æ˜ å°„é…ç½®" tabindex="-1"><a class="header-anchor" href="#æ˜ å°„é…ç½®" aria-hidden="true">#</a> æ˜ å°„é…ç½®</h3><p>æ˜ å°„é…ç½®æ–‡ä»¶åŒ…å«äº†æ•°æ®å’Œå¯¹è±¡ä¹‹é—´çš„æ˜ å°„å…³ç³»ä»¥åŠè¦æ‰§è¡Œçš„ SQL è¯­å¥ï¼Œæ”¾åœ¨ src ç›®å½•ä¸‹</p><p>å‘½åï¼šStudentMapper.xml</p><ul><li><p>æ˜ å°„é…ç½®æ–‡ä»¶çš„æ–‡ä»¶å¤´ï¼š</p><div class="language-xml-dtd line-numbers-mode" data-ext="xml-dtd"><pre class="language-xml-dtd"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ ¹æ ‡ç­¾ï¼š</p><ul><li>&lt;mapper&gt;ï¼šæ ¸å¿ƒæ ¹æ ‡ç­¾</li><li>namespaceï¼šå±æ€§ï¼Œåç§°ç©ºé—´</li></ul></li><li><p>åŠŸèƒ½æ ‡ç­¾ï¼š</p><ul><li>&lt; select &gt;ï¼šæŸ¥è¯¢åŠŸèƒ½æ ‡ç­¾</li><li>&lt;insert&gt;ï¼šæ–°å¢åŠŸèƒ½æ ‡ç­¾</li><li>&lt;update&gt;ï¼šä¿®æ”¹åŠŸèƒ½æ ‡ç­¾</li><li>&lt;delete&gt;ï¼šåˆ é™¤åŠŸèƒ½æ ‡ç­¾ <ul><li>idï¼šå±æ€§ï¼Œå”¯ä¸€æ ‡è¯†ï¼Œé…åˆåç§°ç©ºé—´ä½¿ç”¨</li><li>resultTypeï¼šæŒ‡å®šç»“æœæ˜ å°„å¯¹è±¡ç±»å‹ï¼Œå’Œå¯¹åº”çš„æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼ˆå…¨é™å®šåï¼‰ä¿æŒä¸€è‡´ï¼Œä½†æ˜¯å¦‚æœè¿”å›å€¼æ˜¯ List åˆ™å’Œå…¶æ³›å‹ä¿æŒä¸€è‡´</li><li>parameterTypeï¼šæŒ‡å®šå‚æ•°æ˜ å°„å¯¹è±¡ç±»å‹ï¼Œå¿…é¡»å’Œå¯¹åº”çš„æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼ˆå…¨é™å®šåï¼‰ä¿æŒä¸€è‡´</li><li><strong>statementType</strong>ï¼šå¯é€‰ STATEMENTï¼ŒPREPARED æˆ– CALLABLEï¼Œé»˜è®¤å€¼ï¼šPREPARED <ul><li>STATEMENTï¼šç›´æ¥æ“ä½œ SQLï¼Œä½¿ç”¨ Statement ä¸è¿›è¡Œé¢„ç¼–è¯‘ï¼Œè·å–æ•°æ®ï¼š$</li><li>PREPAREDï¼šé¢„å¤„ç†å‚æ•°ï¼Œä½¿ç”¨ PreparedStatement è¿›è¡Œé¢„ç¼–è¯‘ï¼Œè·å–æ•°æ®ï¼š#</li><li>CALLABLEï¼šæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ï¼ŒCallableStatement</li></ul></li></ul></li></ul></li><li><p>å‚æ•°è·å–æ–¹å¼ï¼š</p><ul><li><p>SQL è·å–å‚æ•°ï¼š<code>#{å±æ€§å}</code></p><div class="language-xml-dtd line-numbers-mode" data-ext="xml-dtd"><pre class="language-xml-dtd"><code>&lt;mapper namespace=&quot;StudentMapper&quot;&gt;
    &lt;select id=&quot;selectById&quot; resultType=&quot;student&quot; parameterType=&quot;int&quot;&gt;
		SELECT * FROM student WHERE id = #{id}
    &lt;/select&gt;
&lt;mapper/&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><p>å¼ºçƒˆæ¨èå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://mybatis.org/mybatis-3/zh/sqlmap-xml.html" target="_blank" rel="noopener noreferrer">https://mybatis.org/mybatis-3/zh/sqlmap-xml.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><h3 id="æ ¸å¿ƒé…ç½®" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒé…ç½®" aria-hidden="true">#</a> æ ¸å¿ƒé…ç½®</h3><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶åŒ…å«äº† MyBatis æœ€æ ¸å¿ƒçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ï¼Œå¦‚æ•°æ®åº“çš„è¿æ¥ã€äº‹åŠ¡ã€è¿æ¥æ± ä¿¡æ¯ç­‰</p><p>å‘½åï¼šMyBatisConfig.xml</p><ul><li><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„æ–‡ä»¶å¤´ï¼š</p><div class="language-xml-dtd line-numbers-mode" data-ext="xml-dtd"><pre class="language-xml-dtd"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ ¹æ ‡ç­¾ï¼š</p><ul><li>&lt;configuration&gt;ï¼šæ ¸å¿ƒæ ¹æ ‡ç­¾</li></ul></li><li><p>å¼•å…¥è¿æ¥é…ç½®æ–‡ä»¶ï¼š</p><ul><li><p>&lt;properties&gt;ï¼š å¼•å…¥æ•°æ®åº“è¿æ¥é…ç½®æ–‡ä»¶æ ‡ç­¾</p><ul><li>resourceï¼šå±æ€§ï¼ŒæŒ‡å®šé…ç½®æ–‡ä»¶å</li></ul><div class="language-xml-dtd line-numbers-mode" data-ext="xml-dtd"><pre class="language-xml-dtd"><code>&lt;properties resource=&quot;jdbc.properties&quot;/&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li><li><p>è°ƒæ•´è®¾ç½®</p><ul><li>&lt;settings&gt;ï¼šå¯ä»¥æ”¹å˜ Mybatis è¿è¡Œæ—¶è¡Œä¸º</li></ul></li><li><p>èµ·åˆ«åï¼š</p><ul><li><p>&lt;typeAliases&gt;ï¼šä¸ºå…¨ç±»åèµ·åˆ«åçš„çˆ¶æ ‡ç­¾</p><ul><li><p>&lt;typeAlias&gt;ï¼šä¸ºå…¨ç±»åèµ·åˆ«åçš„å­æ ‡ç­¾</p><ul><li>typeï¼šæŒ‡å®šå…¨ç±»å</li><li>aliasï¼šæŒ‡å®šåˆ«å</li></ul></li><li><p>&lt;package&gt;ï¼šä¸ºæŒ‡å®šåŒ…ä¸‹æ‰€æœ‰ç±»èµ·åˆ«åçš„å­æ ‡ç­¾ï¼Œåˆ«åå°±æ˜¯ç±»åï¼Œé¦–å­—æ¯å°å†™</p></li></ul><div class="language-xml-dtd line-numbers-mode" data-ext="xml-dtd"><pre class="language-xml-dtd"><code>&lt;!--èµ·åˆ«å--&gt;
&lt;typeAliases&gt;
	&lt;typeAlias type=&quot;bean.Student&quot; alias=&quot;student&quot;/&gt;
	&lt;package name=&quot;com.seazean.bean&quot;/&gt;
		&lt;!--äºŒé€‰ä¸€--&gt;
&lt;/typeAliase&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è‡ªå¸¦åˆ«åï¼š</p><table><thead><tr><th>åˆ«å</th><th>æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td>string</td><td>java.lang.String</td></tr><tr><td>long</td><td>java.lang.Lang</td></tr><tr><td>int</td><td>java.lang.Integer</td></tr><tr><td>double</td><td>java.lang.Double</td></tr><tr><td>boolean</td><td>java.lang.Boolean</td></tr><tr><td>....</td><td>......</td></tr></tbody></table></li></ul></li><li><p>é…ç½®ç¯å¢ƒï¼Œå¯ä»¥é…ç½®å¤šä¸ªæ ‡ç­¾</p><ul><li>&lt;environments&gt;ï¼šé…ç½®æ•°æ®åº“ç¯å¢ƒæ ‡ç­¾ï¼Œdefault å±æ€§æŒ‡å®šå“ªä¸ª environment</li><li>&lt;environment&gt;ï¼šé…ç½®æ•°æ®åº“ç¯å¢ƒå­æ ‡ç­¾ï¼Œid å±æ€§æ˜¯å”¯ä¸€æ ‡è¯†ï¼Œä¸ default å¯¹åº”</li><li>&lt;transactionManager&gt;ï¼šäº‹åŠ¡ç®¡ç†æ ‡ç­¾ï¼Œtype å±æ€§é»˜è®¤ JDBC äº‹åŠ¡</li><li>&lt;dataSoure&gt;ï¼šæ•°æ®æºæ ‡ç­¾ <ul><li>type å±æ€§ï¼šPOOLED ä½¿ç”¨è¿æ¥æ± ï¼ˆMyBatis å†…ç½®ï¼‰ï¼ŒUNPOOLED ä¸ä½¿ç”¨è¿æ¥æ± </li></ul></li><li>&lt;property&gt;ï¼šæ•°æ®åº“è¿æ¥ä¿¡æ¯æ ‡ç­¾ã€‚ <ul><li>name å±æ€§å–å€¼ï¼šdriverï¼Œurlï¼Œusernameï¼Œpassword</li><li>value å±æ€§å–å€¼ï¼šä¸ name å¯¹åº”</li></ul></li></ul></li><li><p>å¼•å…¥æ˜ å°„é…ç½®æ–‡ä»¶</p><ul><li>&lt;mappers&gt;ï¼šå¼•å…¥æ˜ å°„é…ç½®æ–‡ä»¶æ ‡ç­¾</li><li>&lt;mapper&gt;ï¼šå¼•å…¥æ˜ å°„é…ç½®æ–‡ä»¶å­æ ‡ç­¾ <ul><li>resourceï¼šå±æ€§æŒ‡å®šæ˜ å°„é…ç½®æ–‡ä»¶çš„åç§°</li><li>urlï¼šå¼•ç”¨ç½‘è·¯è·¯å¾„æˆ–è€…ç£ç›˜è·¯å¾„ä¸‹çš„ sql æ˜ å°„æ–‡ä»¶</li><li>classï¼šæŒ‡å®šæ˜ å°„é…ç½®ç±»</li></ul></li><li>&lt;package&gt;ï¼šæ‰¹é‡æ³¨å†Œ</li></ul></li></ul><p>å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://mybatis.org/mybatis-3/zh/configuration.html" target="_blank" rel="noopener noreferrer">https://mybatis.org/mybatis-3/zh/configuration.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><h3 id="å’Œ" tabindex="-1"><a class="header-anchor" href="#å’Œ" aria-hidden="true">#</a> #{}å’Œ${}</h3><p><strong>#{}ï¼š<strong>å ä½ç¬¦ï¼Œä¼ å…¥çš„å†…å®¹ä¼šä½œä¸ºå­—ç¬¦ä¸²</strong>åŠ ä¸Šå¼•å·</strong>ï¼Œä»¥<strong>é¢„ç¼–è¯‘</strong>çš„æ–¹å¼ä¼ å…¥ï¼Œå°† sql ä¸­çš„ #{} æ›¿æ¢ä¸º ? å·ï¼Œè°ƒç”¨ PreparedStatement çš„ set æ–¹æ³•æ¥èµ‹å€¼ï¼Œæœ‰æ•ˆçš„é˜²æ­¢ SQL æ³¨å…¥ï¼Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§</p><p><strong>${}ï¼š<strong>æ‹¼æ¥ç¬¦ï¼Œä¼ å…¥çš„å†…å®¹ä¼š</strong>ç›´æ¥æ›¿æ¢</strong>æ‹¼æ¥ï¼Œä¸ä¼šåŠ ä¸Šå¼•å·ï¼Œå¯èƒ½å­˜åœ¨ sql æ³¨å…¥çš„å®‰å…¨éšæ‚£</p><ul><li><p>èƒ½ç”¨ #{} çš„åœ°æ–¹å°±ç”¨ #{}ï¼Œä¸ç”¨æˆ–å°‘ç”¨ ${}</p></li><li><p>å¿…é¡»ä½¿ç”¨ ${} çš„æƒ…å†µï¼š</p><ul><li>è¡¨åä½œå‚æ•°æ—¶ï¼Œå¦‚ï¼š<code>SELECT * FROM ${tableName}</code></li><li>order by æ—¶ï¼Œå¦‚ï¼š<code>SELECT * FROM t_user ORDER BY ${columnName}</code></li></ul></li><li><p>sql è¯­å¥ä½¿ç”¨ #{}ï¼Œproperties æ–‡ä»¶å†…å®¹è·å–ä½¿ç”¨ ${}</p></li></ul><hr><h3 id="æ—¥å¿—æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—æ–‡ä»¶" aria-hidden="true">#</a> æ—¥å¿—æ–‡ä»¶</h3><p>åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ’æŸ¥é—®é¢˜æ—¶éœ€è¦è¾“å‡º MyBatis çœŸæ­£æ‰§è¡Œçš„ SQL è¯­å¥ã€å‚æ•°ã€ç»“æœç­‰ä¿¡æ¯ï¼Œå°±å¯ä»¥å€ŸåŠ© log4j çš„åŠŸèƒ½æ¥å®ç°æ‰§è¡Œä¿¡æ¯çš„è¾“å‡ºã€‚</p><ul><li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶æ ¹æ ‡ç­¾å†…é…ç½® log4j</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--é…ç½®LOG4J--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logImpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log4j<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>åœ¨ src ç›®å½•ä¸‹åˆ›å»º log4j.properties</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># Global logging configuration</span>
<span class="token key attr-name">log4j.rootLogger</span><span class="token punctuation">=</span><span class="token value attr-value">DEBUG, stdout</span>
<span class="token comment"># Console output...</span>
<span class="token key attr-name">log4j.appender.stdout</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.log4j.ConsoleAppender</span>
<span class="token key attr-name">log4j.appender.stdout.layout</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.log4j.PatternLayout</span>
<span class="token key attr-name">log4j.appender.stdout.layout.ConversionPattern</span><span class="token punctuation">=</span><span class="token value attr-value">%5p [%t] - %m%n</span>

<span class="token comment">#è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶</span>
<span class="token comment">  #log4j.appender.file=org.apache.log4j.FileAppender</span>
<span class="token comment">  #log4j.appender.file.File=../logs/iask.log</span>
<span class="token comment">  #log4j.appender.file.layout=org.apache.log4j.PatternLayout</span>
<span class="token comment">  #log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss}  %l  %m%n</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>pom.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h3 id="ä»£ç å®ç°" tabindex="-1"><a class="header-anchor" href="#ä»£ç å®ç°" aria-hidden="true">#</a> ä»£ç å®ç°</h3><ul><li><p>å®ä½“ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>StudentMapper</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//æŸ¥è¯¢å…¨éƒ¨</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//æ ¹æ®idæŸ¥è¯¢</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Student</span> <span class="token function">selectById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//æ–°å¢æ•°æ®</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Integer</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Student</span> stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//ä¿®æ”¹æ•°æ®</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Integer</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Student</span> stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//åˆ é™¤æ•°æ®</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Integer</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>config.properties</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">driver</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://192.168.2.184:3306/db1</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>MyBatisConfig.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span> <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--æ ¸å¿ƒæ ¹æ ‡ç­¾--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--å¼•å…¥æ•°æ®åº“è¿æ¥çš„é…ç½®æ–‡ä»¶--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    
    <span class="token comment">&lt;!--é…ç½®LOG4J--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logImpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log4j<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!--èµ·åˆ«å--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean.Student<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>student<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--&lt;package name=&quot;bean&quot;/&gt;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--é…ç½®æ•°æ®åº“ç¯å¢ƒï¼Œå¯ä»¥å¤šä¸ªç¯å¢ƒï¼ŒdefaultæŒ‡å®šå“ªä¸ª--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--idå±æ€§å”¯ä¸€æ ‡è¯†--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--äº‹åŠ¡ç®¡ç†ï¼Œtypeå±æ€§ï¼Œé»˜è®¤JDBCäº‹åŠ¡--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transactionManager</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--æ•°æ®æºä¿¡æ¯   typeå±æ€§è¿æ¥æ± --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!--propertyè·å–æ•°æ®åº“è¿æ¥çš„é…ç½®ä¿¡æ¯--&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--å¼•å…¥æ˜ å°„é…ç½®æ–‡ä»¶--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mapperå¼•å…¥æŒ‡å®šçš„æ˜ å°„é…ç½® resourceå±æ€§æ‰§è¡Œçš„æ˜ å°„é…ç½®æ–‡ä»¶çš„åç§°--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>StudentMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>StudentMapper.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>StudentMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        SELECT * FROM student
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>student<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        SELECT * FROM student WHERE id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insert<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        INSERT INTO student VALUES (#{id},#{name},#{age})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        UPDATE student SET name = #{name}, age = #{age} WHERE id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>delete<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        DELETE FROM student WHERE id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ§åˆ¶å±‚æµ‹è¯•ä»£ç ï¼šæ ¹æ® id æŸ¥è¯¢</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">selectById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
    <span class="token comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span>
    <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;MyBatisConfig.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//2.è·å–SqlSessionå·¥å‚å¯¹è±¡</span>
    <span class="token class-name">SqlSessionFactory</span> ssf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//3.é€šè¿‡å·¥å‚å¯¹è±¡è·å–SqlSessionå¯¹è±¡</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> ssf<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//4.æ‰§è¡Œæ˜ å°„é…ç½®æ–‡ä»¶ä¸­çš„sqlè¯­å¥ï¼Œå¹¶æ¥æ”¶ç»“æœ</span>
    <span class="token class-name">Student</span> stu <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token string">&quot;StudentMapper.selectById&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//5.å¤„ç†ç»“æœ</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//6.é‡Šæ”¾èµ„æº</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ§åˆ¶å±‚æµ‹è¯•ä»£ç ï¼šæ–°å¢åŠŸèƒ½</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
    <span class="token comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span>
    <span class="token comment">//2.è·å–SqlSessionå·¥å‚å¯¹è±¡</span>
    <span class="token comment">//3.é€šè¿‡å·¥å‚å¯¹è±¡è·å–SqlSessionå¯¹è±¡</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//4.æ‰§è¡Œæ˜ å°„é…ç½®æ–‡ä»¶ä¸­çš„sqlè¯­å¥ï¼Œå¹¶æ¥æ”¶ç»“æœ</span>
    <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;å‘¨ä¸ƒ&quot;</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&quot;StudentMapper.insert&quot;</span><span class="token punctuation">,</span> stu<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//5.æäº¤äº‹åŠ¡</span>
    <span class="token comment">//sqlSession.commit();</span>

    <span class="token comment">//6.å¤„ç†ç»“æœ</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//7.é‡Šæ”¾èµ„æº</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h3 id="æ‰¹é‡æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#æ‰¹é‡æ“ä½œ" aria-hidden="true">#</a> æ‰¹é‡æ“ä½œ</h3><p>ä¸‰ç§æ–¹å¼å®ç°æ‰¹é‡æ“ä½œï¼š</p><ul><li><p>&lt;settings&gt; æ ‡ç­¾å±æ€§ï¼šè¿™ç§æ–¹å¼å±äº<strong>å…¨å±€æ‰¹é‡</strong></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>defaultExecutorType<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BATCH<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>defaultExecutorTypeï¼šé…ç½®é»˜è®¤çš„æ‰§è¡Œå™¨</p><ul><li>SIMPLE å°±æ˜¯æ™®é€šçš„æ‰§è¡Œå™¨ï¼ˆé»˜è®¤ï¼Œæ¯æ¬¡æ‰§è¡Œéƒ½è¦é‡æ–°è®¾ç½®å‚æ•°ï¼‰</li><li>REUSE æ‰§è¡Œå™¨ä¼šé‡ç”¨é¢„å¤„ç†è¯­å¥ï¼ˆåªé¢„è®¾ç½®ä¸€æ¬¡å‚æ•°ï¼Œå¤šæ¬¡æ‰§è¡Œï¼‰</li><li>BATCH æ‰§è¡Œå™¨ä¸ä»…é‡ç”¨è¯­å¥è¿˜ä¼šæ‰§è¡Œæ‰¹é‡æ›´æ–°ï¼ˆåªé’ˆå¯¹<strong>ä¿®æ”¹æ“ä½œ</strong>ï¼‰</li></ul></li><li><p>SqlSession <strong>ä¼šè¯å†…æ‰¹é‡</strong>æ“ä½œï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">{</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å¯ä»¥æ‰§è¡Œæ‰¹é‡æ“ä½œçš„sqlSession</span>
    <span class="token class-name">SqlSession</span> openSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token class-name">ExecutorType</span><span class="token punctuation">.</span><span class="token constant">BATCH</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span><span class="token punctuation">{</span>
        <span class="token class-name">EmployeeMapper</span> mapper <span class="token operator">=</span> openSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">EmployeeMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mapper<span class="token punctuation">.</span><span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        openSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ‰¹é‡ï¼šï¼ˆé¢„ç¼–è¯‘sqlä¸€æ¬¡==&gt;è®¾ç½®å‚æ•°===&gt;10000æ¬¡===&gt;æ‰§è¡Œ1æ¬¡ï¼ˆç±»ä¼¼ç®¡é“ï¼‰ï¼‰</span>
        <span class="token comment">// éæ‰¹é‡ï¼šï¼ˆé¢„ç¼–è¯‘sql=è®¾ç½®å‚æ•°=æ‰§è¡Œï¼‰==ã€‹10000   è€—æ—¶æ›´å¤š</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œæ—¶é•¿ï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
        openSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Spring é…ç½®æ–‡ä»¶æ–¹å¼ï¼ˆapplicationContext.xmlï¼‰ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--é…ç½®ä¸€ä¸ªå¯ä»¥è¿›è¡Œæ‰¹é‡æ‰§è¡Œçš„sqlSession  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSession<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.SqlSessionTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>executorType<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BATCH<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">SqlSession</span> sqlSession<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h2 id="ä»£ç†å¼€å‘" tabindex="-1"><a class="header-anchor" href="#ä»£ç†å¼€å‘" aria-hidden="true">#</a> ä»£ç†å¼€å‘</h2><h3 id="ä»£ç†è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#ä»£ç†è§„åˆ™" aria-hidden="true">#</a> ä»£ç†è§„åˆ™</h3><p>åˆ†å±‚æ€æƒ³ï¼šæ§åˆ¶å±‚ï¼ˆcontrollerï¼‰ã€ä¸šåŠ¡å±‚ï¼ˆserviceï¼‰ã€æŒä¹…å±‚ï¼ˆdaoï¼‰</p><p>è°ƒç”¨æµç¨‹ï¼š</p><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/åˆ†å±‚æ€æƒ³è°ƒç”¨æµç¨‹.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¼ ç»Ÿæ–¹å¼å®ç° DAO å±‚ï¼Œéœ€è¦å†™æ¥å£å’Œå®ç°ç±»ã€‚é‡‡ç”¨ Mybatis çš„ä»£ç†å¼€å‘æ–¹å¼å®ç° DAO å±‚çš„å¼€å‘ï¼Œåªéœ€è¦ç¼–å†™ Mapper æ¥å£ï¼ˆç›¸å½“äº Dao æ¥å£ï¼‰ï¼Œç”± Mybatis æ¡†æ¶æ ¹æ®æ¥å£å®šä¹‰åˆ›å»ºæ¥å£çš„<strong>åŠ¨æ€ä»£ç†å¯¹è±¡</strong></p><p>æ¥å£å¼€å‘æ–¹å¼ï¼š</p><ol><li>å®šä¹‰æ¥å£</li><li>æ“ä½œæ•°æ®åº“ï¼ŒMyBatis æ¡†æ¶æ ¹æ®æ¥å£ï¼Œé€šè¿‡åŠ¨æ€ä»£ç†çš„æ–¹å¼ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œè´Ÿè´£æ•°æ®åº“çš„æ“ä½œ</li></ol><p>Mapper æ¥å£å¼€å‘éœ€è¦éµå¾ªä»¥ä¸‹è§„èŒƒï¼š</p><ul><li><p>Mapper.xml æ–‡ä»¶ä¸­çš„ namespace ä¸ DAO å±‚ mapper æ¥å£çš„å…¨ç±»åç›¸åŒ</p></li><li><p>Mapper.xml æ–‡ä»¶ä¸­çš„å¢åˆ æ”¹æŸ¥æ ‡ç­¾çš„idå±æ€§å’Œ DAO å±‚ Mapper æ¥å£æ–¹æ³•åç›¸åŒ</p></li><li><p>Mapper.xml æ–‡ä»¶ä¸­çš„å¢åˆ æ”¹æŸ¥æ ‡ç­¾çš„ parameterType å±æ€§å’Œ DAO å±‚ Mapper æ¥å£æ–¹æ³•çš„å‚æ•°ç›¸åŒ</p></li><li><p>Mapper.xml æ–‡ä»¶ä¸­çš„å¢åˆ æ”¹æŸ¥æ ‡ç­¾çš„ resultType å±æ€§å’Œ DAO å±‚ Mapper æ¥å£æ–¹æ³•çš„è¿”å›å€¼ç›¸åŒ</p><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/æ¥å£ä»£ç†æ–¹å¼å®ç°DAOå±‚.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li></ul><hr><h3 id="å®ç°åŸç†" tabindex="-1"><a class="header-anchor" href="#å®ç°åŸç†" aria-hidden="true">#</a> å®ç°åŸç†</h3><p>é€šè¿‡åŠ¨æ€ä»£ç†å¼€å‘æ¨¡å¼ï¼Œåªç¼–å†™ä¸€ä¸ªæ¥å£ä¸å†™å®ç°ç±»ï¼Œé€šè¿‡ <strong>getMapper()</strong> æ–¹æ³•æœ€ç»ˆè·å–åˆ° MapperProxy ä»£ç†å¯¹è±¡ï¼Œè€Œè¿™ä¸ªä»£ç†å¯¹è±¡æ˜¯ MyBatis ä½¿ç”¨äº† JDK çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ç”Ÿæˆçš„</p><p>åŠ¨æ€ä»£ç†å®ç°ç±»å¯¹è±¡åœ¨æ‰§è¡Œæ–¹æ³•æ—¶æœ€ç»ˆè°ƒç”¨äº† <strong>MapperMethod.execute()</strong> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­é€šè¿‡ switch case è¯­å¥æ ¹æ®æ“ä½œç±»å‹æ¥åˆ¤æ–­æ˜¯æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥è¯¢æ“ä½œï¼Œæœ€åä¸€æ­¥å›åˆ°äº† MyBatis æœ€åŸç”Ÿçš„ <strong>SqlSession æ–¹å¼æ¥æ‰§è¡Œå¢åˆ æ”¹æŸ¥</strong></p><ul><li><p>ä»£ç å®ç°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">selectById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span><span class="token punctuation">{</span>
        <span class="token comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span>
        is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;MyBatisConfig.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.è·å–SqlSessionå·¥å‚å¯¹è±¡</span>
        <span class="token class-name">SqlSessionFactory</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3.é€šè¿‡å·¥å‚å¯¹è±¡è·å–SqlSessionå¯¹è±¡</span>
        sqlSession <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//4.è·å–StudentMapperæ¥å£çš„å®ç°ç±»å¯¹è±¡</span>
        <span class="token class-name">StudentMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">StudentMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

        <span class="token comment">//5.é€šè¿‡å®ç°ç±»å¯¹è±¡è°ƒç”¨æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ</span>
        stu <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token comment">//6.é‡Šæ”¾èµ„æº</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sqlSession <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>is <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//7.è¿”å›ç»“æœ</span>
    <span class="token keyword">return</span> stu<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h2 id="ç»“æœæ˜ å°„" tabindex="-1"><a class="header-anchor" href="#ç»“æœæ˜ å°„" aria-hidden="true">#</a> ç»“æœæ˜ å°„</h2><h3 id="ç›¸å…³æ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#ç›¸å…³æ ‡ç­¾" aria-hidden="true">#</a> ç›¸å…³æ ‡ç­¾</h3><p>&lt;resultType&gt;ï¼šè¿”å›ç»“æœæ˜ å°„å¯¹è±¡ç±»å‹ï¼Œå’Œå¯¹åº”æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ä¿æŒä¸€è‡´ï¼Œä½†æ˜¯å¦‚æœè¿”å›å€¼æ˜¯ List åˆ™å’Œå…¶æ³›å‹ä¿æŒä¸€è‡´</p><p>&lt;resultMap&gt;ï¼šè¿”å›ä¸€æ¡è®°å½•çš„ Mapï¼Œkey æ˜¯åˆ—åï¼Œvalue æ˜¯å¯¹åº”çš„å€¼ï¼Œç”¨æ¥é…ç½®<strong>å­—æ®µå’Œå¯¹è±¡å±æ€§</strong>çš„æ˜ å°„å…³ç³»æ ‡ç­¾ï¼Œç»“æœæ˜ å°„ï¼ˆå’Œ resultType äºŒé€‰ä¸€ï¼‰</p><ul><li>id å±æ€§ï¼šå”¯ä¸€æ ‡è¯†</li><li>type å±æ€§ï¼šå®ä½“å¯¹è±¡ç±»å‹</li><li>autoMapping å±æ€§ï¼šç»“æœè‡ªåŠ¨æ˜ å°„</li></ul><p>&lt;resultMap&gt; å†…çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æ ‡ç­¾ï¼š</p><ul><li><p>&lt;id&gt;ï¼šé…ç½®ä¸»é”®æ˜ å°„å…³ç³»æ ‡ç­¾</p></li><li><p>&lt;result&gt;ï¼šé…ç½®éä¸»é”®æ˜ å°„å…³ç³»æ ‡ç­¾</p><ul><li>column å±æ€§ï¼šè¡¨ä¸­å­—æ®µåç§°</li><li>property å±æ€§ï¼š å®ä½“å¯¹è±¡å˜é‡åç§°</li></ul></li><li><p>&lt;association&gt;ï¼šé…ç½®è¢«åŒ…å«<strong>å•ä¸ªå¯¹è±¡</strong>çš„æ˜ å°„å…³ç³»æ ‡ç­¾ï¼ŒåµŒå¥—å°è£…ç»“æœé›†ï¼ˆå¤šå¯¹ä¸€ã€ä¸€å¯¹ä¸€ï¼‰</p><ul><li>property å±æ€§ï¼šè¢«åŒ…å«å¯¹è±¡çš„å˜é‡åï¼Œè¦è¿›è¡Œæ˜ å°„çš„å±æ€§å</li><li>javaType å±æ€§ï¼šè¢«åŒ…å«å¯¹è±¡çš„æ•°æ®ç±»å‹ï¼Œè¦è¿›è¡Œæ˜ å°„çš„å±æ€§çš„ç±»å‹ï¼ˆJava ä¸­çš„ Bean ç±»ï¼‰</li><li>select å±æ€§ï¼šåŠ è½½å¤æ‚ç±»å‹å±æ€§çš„æ˜ å°„è¯­å¥çš„ IDï¼Œä¼šä» column å±æ€§æŒ‡å®šçš„åˆ—ä¸­æ£€ç´¢æ•°æ®ï¼Œä½œä¸ºå‚æ•°ä¼ é€’ç»™ç›®æ ‡ select è¯­å¥</li></ul></li><li><p>&lt;collection&gt;ï¼šé…ç½®è¢«åŒ…å«<strong>é›†åˆå¯¹è±¡</strong>çš„æ˜ å°„å…³ç³»æ ‡ç­¾ï¼ŒåµŒå¥—å°è£…ç»“æœé›†ï¼ˆä¸€å¯¹å¤šã€å¤šå¯¹å¤šï¼‰</p><ul><li>property å±æ€§ï¼šè¢«åŒ…å«é›†åˆå¯¹è±¡çš„å˜é‡å</li><li>ofType å±æ€§ï¼šé›†åˆä¸­ä¿å­˜çš„å¯¹è±¡æ•°æ®ç±»å‹</li></ul></li><li><p>&lt;discriminator&gt;ï¼šé‰´åˆ«å™¨ï¼Œç”¨æ¥åˆ¤æ–­æŸåˆ—çš„å€¼ï¼Œæ ¹æ®å¾—åˆ°æŸåˆ—çš„ä¸åŒå€¼åšå‡ºä¸åŒè‡ªå®šä¹‰çš„å°è£…è¡Œä¸º</p></li></ul><p>è‡ªå®šä¹‰å°è£…è§„åˆ™å¯ä»¥å°†æ•°æ®åº“ä¸­æ¯”è¾ƒå¤æ‚çš„æ•°æ®ç±»å‹æ˜ å°„ä¸º JavaBean ä¸­çš„å±æ€§</p><hr><h3 id="åµŒå¥—æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#åµŒå¥—æŸ¥è¯¢" aria-hidden="true">#</a> åµŒå¥—æŸ¥è¯¢</h3><p>å­æŸ¥è¯¢ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Blog</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Author</span> author<span class="token punctuation">;</span>
    <span class="token comment">// set + get</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blogResult<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Blog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autoMapping</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Author<span class="token punctuation">&quot;</span></span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAuthor<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectBlog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blogResult<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT * FROM BLOG WHERE ID = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAuthor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Author<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT * FROM AUTHOR WHERE ID = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾ªç¯å¼•ç”¨ï¼šé€šè¿‡ç¼“å­˜è§£å†³</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blogResult<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Blog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autoMapping</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Blog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blogResult<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!--y--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
&lt;/resultMap
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="å¤šè¡¨æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#å¤šè¡¨æŸ¥è¯¢" aria-hidden="true">#</a> å¤šè¡¨æŸ¥è¯¢</h3><h4 id="ä¸€å¯¹ä¸€" tabindex="-1"><a class="header-anchor" href="#ä¸€å¯¹ä¸€" aria-hidden="true">#</a> ä¸€å¯¹ä¸€</h4><p>ä¸€å¯¹ä¸€å®ç°ï¼š</p><ul><li><p>æ•°æ®å‡†å¤‡</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>CREATE TABLE person(
	id INT PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(20),
	age INT
);
INSERT INTO person VALUES (NULL,&#39;å¼ ä¸‰&#39;,23),(NULL,&#39;æå››&#39;,24),(NULL,&#39;ç‹äº”&#39;,25);

CREATE TABLE card(
	id INT PRIMARY KEY AUTO_INCREMENT,
	number VARCHAR(30),
	pid INT,
	CONSTRAINT cp_fk FOREIGN KEY (pid) REFERENCES person(id)
);
INSERT INTO card VALUES (NULL,&#39;12345&#39;,1),(NULL,&#39;23456&#39;,2),(NULL,&#39;34567&#39;,3);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>bean ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Card</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>     <span class="token comment">//ä¸»é”®id</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> number<span class="token punctuation">;</span>  <span class="token comment">//èº«ä»½è¯å·</span>
    <span class="token keyword">private</span> <span class="token class-name">Person</span> p<span class="token punctuation">;</span>       <span class="token comment">//æ‰€å±äººçš„å¯¹è±¡</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>     <span class="token comment">//ä¸»é”®id</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">//äººçš„å§“å</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>    <span class="token comment">//äººçš„å¹´é¾„</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>é…ç½®æ–‡ä»¶ OneToOneMapper.xmlï¼ŒMyBatisConfig.xml éœ€è¦å¼•å…¥ï¼ˆå¯ä»¥æŠŠ bean åŒ…ä¸‹èµ·åˆ«åï¼‰</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>OneToOneMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--é…ç½®å­—æ®µå’Œå®ä½“å¯¹è±¡å±æ€§çš„æ˜ å°„å…³ç³»--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oneToOne<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>card<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       	<span class="token comment">&lt;!--column è¡¨ä¸­å­—æ®µåç§°ï¼Œproperty å®ä½“å¯¹è±¡å˜é‡åç§°--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--
            associationï¼šé…ç½®è¢«åŒ…å«å¯¹è±¡çš„æ˜ å°„å…³ç³»
            propertyï¼šè¢«åŒ…å«å¯¹è±¡çš„å˜é‡å
            javaTypeï¼šè¢«åŒ…å«å¯¹è±¡çš„æ•°æ®ç±»å‹
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean.Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oneToOne<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--SQL--&gt;</span>
        SELECT c.id cid,number,pid,NAME,age FROM card c,person p WHERE c.pid=p.id
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ MyBatisConfig.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- mapperså¼•å…¥æ˜ å°„é…ç½®æ–‡ä»¶ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>one_to_one/OneToOneMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>one_to_many/OneToManyMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>many_to_many/ManyToManyMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æµ‹è¯•ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;MyBatisConfig.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.è·å–SqlSessionå·¥å‚å¯¹è±¡</span>
        <span class="token class-name">SqlSessionFactory</span> ssf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3.é€šè¿‡å·¥å‚å¯¹è±¡è·å–SqlSessionå¯¹è±¡</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> ssf<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//4.è·å–OneToOneMapperæ¥å£çš„å®ç°ç±»å¯¹è±¡</span>
        <span class="token class-name">OneToOneMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">OneToOneMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//5.è°ƒç”¨å®ç°ç±»çš„æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//6.å¤„ç†ç»“æœ</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Card</span> c <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//7.é‡Šæ”¾èµ„æº</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h4 id="ä¸€å¯¹å¤š" tabindex="-1"><a class="header-anchor" href="#ä¸€å¯¹å¤š" aria-hidden="true">#</a> ä¸€å¯¹å¤š</h4><p>ä¸€å¯¹å¤šå®ç°ï¼š</p><ul><li><p>æ•°æ®å‡†å¤‡</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>CREATE TABLE classes(
	id INT PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(20)
);
INSERT INTO classes VALUES (NULL,&#39;ç¨‹åºä¸€ç­&#39;),(NULL,&#39;ç¨‹åºäºŒç­&#39;)

CREATE TABLE student(
	id INT PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(30),
	age INT,
	cid INT,
	CONSTRAINT cs_fk FOREIGN KEY (cid) REFERENCES classes(id)
);
INSERT INTO student VALUES (NULL,&#39;å¼ ä¸‰&#39;,23,1),(NULL,&#39;æå››&#39;,24,1),(NULL,&#39;ç‹äº”&#39;,25,2);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>bean ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Classes</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>     <span class="token comment">//ä¸»é”®id</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">//ç­çº§åç§°</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> students<span class="token punctuation">;</span> <span class="token comment">//ç­çº§ä¸­æ‰€æœ‰å­¦ç”Ÿå¯¹è±¡</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>     <span class="token comment">//ä¸»é”®id</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">//å­¦ç”Ÿå§“å</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>    <span class="token comment">//å­¦ç”Ÿå¹´é¾„</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ˜ å°„é…ç½®æ–‡ä»¶</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>OneToManyMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oneToMany<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean.Classes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token comment">&lt;!--collectionï¼šé…ç½®è¢«åŒ…å«çš„é›†åˆå¯¹è±¡æ˜ å°„å…³ç³»--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>students<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean.Student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oneToMany<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--SQL--&gt;</span>
        SELECT c.id cid,c.name cname,s.id sid,s.name sname,s.age sage FROM classes c,student s WHERE c.id=s.cid
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ä»£ç å®ç°ç‰‡æ®µ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//4.è·å–OneToManyMapperæ¥å£çš„å®ç°ç±»å¯¹è±¡</span>
<span class="token class-name">OneToManyMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">OneToManyMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//5.è°ƒç”¨å®ç°ç±»çš„æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Classes</span><span class="token punctuation">&gt;</span></span> classes <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//6.å¤„ç†ç»“æœ</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Classes</span> cls <span class="token operator">:</span> classes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> cls<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> students <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">getStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Student</span> student <span class="token operator">:</span> students<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h4 id="å¤šå¯¹å¤š" tabindex="-1"><a class="header-anchor" href="#å¤šå¯¹å¤š" aria-hidden="true">#</a> å¤šå¯¹å¤š</h4><p>å­¦ç”Ÿè¯¾ç¨‹ä¾‹å­ï¼Œä¸­é—´è¡¨ä¸éœ€è¦ bean å®ä½“ç±»</p><ul><li><p>æ•°æ®å‡†å¤‡</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>CREATE TABLE course(
	id INT PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(20)
);
INSERT INTO course VALUES (NULL,&#39;è¯­æ–‡&#39;),(NULL,&#39;æ•°å­¦&#39;);

CREATE TABLE stu_cr(
	id INT PRIMARY KEY AUTO_INCREMENT,
	sid INT,
	cid INT,
	CONSTRAINT sc_fk1 FOREIGN KEY (sid) REFERENCES student(id),
	CONSTRAINT sc_fk2 FOREIGN KEY (cid) REFERENCES course(id)
);
INSERT INTO stu_cr VALUES (NULL,1,1),(NULL,1,2),(NULL,2,1),(NULL,2,2);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>beanç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>     <span class="token comment">//ä¸»é”®id</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">//å­¦ç”Ÿå§“å</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>    <span class="token comment">//å­¦ç”Ÿå¹´é¾„</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Course</span><span class="token punctuation">&gt;</span></span> courses<span class="token punctuation">;</span>   <span class="token comment">// å­¦ç”Ÿæ‰€é€‰æ‹©çš„è¯¾ç¨‹é›†åˆ</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Course</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>     <span class="token comment">//ä¸»é”®id</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">//è¯¾ç¨‹åç§°</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>é…ç½®æ–‡ä»¶</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ManyToManyMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manyToMany<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Bean.Student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>courses<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Bean.Course<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manyToMany<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--SQL--&gt;</span>
        SELECT sc.sid,s.name sname,s.age sage,sc.cid,c.name cname FROM student s,course c,stu_cr sc WHERE sc.sid=s.id AND sc.cid=c.id
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h3 id="é‰´åˆ«å™¨" tabindex="-1"><a class="header-anchor" href="#é‰´åˆ«å™¨" aria-hidden="true">#</a> é‰´åˆ«å™¨</h3><p>éœ€æ±‚ï¼šå¦‚æœæŸ¥è¯¢ç»“æœæ˜¯å¥³æ€§ï¼Œåˆ™æŠŠéƒ¨é—¨ä¿¡æ¯æŸ¥è¯¢å‡ºæ¥ï¼Œå¦åˆ™ä¸æŸ¥è¯¢ ï¼›å¦‚æœæ˜¯ç”·æ€§ï¼ŒæŠŠ last_name è¿™ä¸€åˆ—çš„å€¼èµ‹å€¼</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- 
    columnï¼šæŒ‡å®šè¦åˆ¤æ–­çš„åˆ—å 
    javaTypeï¼šåˆ—å€¼å¯¹åº”çš„javaç±»å‹
   --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>discriminator</span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>string<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å¥³ç”Ÿ --&gt;</span>
    <span class="token comment">&lt;!-- resultTypeä¸å¯ç¼ºå°‘ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨resutlMap --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>case</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.bean.Employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.dao.DepartmentMapper.getDeptById<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>d_id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>case</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ç”·ç”Ÿ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>case</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.bean.Employee<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>last_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lastName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>case</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>discriminator</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="å»¶è¿ŸåŠ è½½" tabindex="-1"><a class="header-anchor" href="#å»¶è¿ŸåŠ è½½" aria-hidden="true">#</a> å»¶è¿ŸåŠ è½½</h3><h4 id="ä¸¤ç§åŠ è½½" tabindex="-1"><a class="header-anchor" href="#ä¸¤ç§åŠ è½½" aria-hidden="true">#</a> ä¸¤ç§åŠ è½½</h4><p>ç«‹å³åŠ è½½ï¼šåªè¦è°ƒç”¨æ–¹æ³•ï¼Œé©¬ä¸Šå‘èµ·æŸ¥è¯¢</p><p>å»¶è¿ŸåŠ è½½ï¼šåœ¨éœ€è¦ç”¨åˆ°æ•°æ®æ—¶æ‰è¿›è¡ŒåŠ è½½ï¼Œä¸éœ€è¦ç”¨åˆ°æ•°æ®æ—¶å°±ä¸åŠ è½½æ•°æ®ï¼Œå»¶è¿ŸåŠ è½½ä¹Ÿç§°æ‡’åŠ è½½</p><p>ä¼˜ç‚¹ï¼š å…ˆä»å•è¡¨æŸ¥è¯¢ï¼Œéœ€è¦æ—¶å†ä»å…³è”è¡¨å»å…³è”æŸ¥è¯¢ï¼Œæé«˜æ•°æ®åº“æ€§èƒ½ï¼Œå› ä¸ºæŸ¥è¯¢å•è¡¨è¦æ¯”å…³è”æŸ¥è¯¢å¤šå¼ è¡¨é€Ÿåº¦è¦å¿«ï¼ŒèŠ‚çœèµ„æº</p><p>åå¤„ï¼šåªæœ‰å½“éœ€è¦ç”¨åˆ°æ•°æ®æ—¶ï¼Œæ‰ä¼šè¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼Œè¿™æ ·åœ¨å¤§æ‰¹é‡æ•°æ®æŸ¥è¯¢æ—¶ï¼ŒæŸ¥è¯¢å·¥ä½œä¹Ÿè¦æ¶ˆè€—æ—¶é—´ï¼Œæ‰€ä»¥å¯èƒ½é€ æˆç”¨æˆ·ç­‰å¾…æ—¶é—´å˜é•¿ï¼Œé€ æˆç”¨æˆ·ä½“éªŒä¸‹é™</p><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š</p><table><thead><tr><th>æ ‡ç­¾å</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>lazyLoadingEnabled</td><td>å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ï¼Œç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½® <code>fetchType</code> å±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€ã€‚</td><td>false</td></tr><tr><td>aggressiveLazyLoading</td><td>å¼€å¯æ—¶ï¼Œä»»ä¸€æ–¹æ³•çš„è°ƒç”¨éƒ½ä¼šåŠ è½½è¯¥å¯¹è±¡çš„æ‰€æœ‰å»¶è¿ŸåŠ è½½å±æ€§ã€‚å¦åˆ™æ¯ä¸ªå»¶è¿ŸåŠ è½½å±æ€§ä¼šæŒ‰éœ€åŠ è½½ï¼ˆå‚è€ƒ lazyLoadTriggerMethodsï¼‰</td><td>false</td></tr></tbody></table><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span> 
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazyLoadingEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aggressiveLazyLoading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="assocation" tabindex="-1"><a class="header-anchor" href="#assocation" aria-hidden="true">#</a> assocation</h4><p>åˆ†å¸ƒæŸ¥è¯¢ï¼šå…ˆæŒ‰ç…§èº«ä»½ id æŸ¥è¯¢æ‰€å±äººçš„ idã€ç„¶åæ ¹æ®æ‰€å±äººçš„ id å»æŸ¥è¯¢äººçš„å…¨éƒ¨ä¿¡æ¯ï¼Œè¿™å°±æ˜¯åˆ†æ­¥æŸ¥è¯¢</p><ul><li><p>æ˜ å°„é…ç½®æ–‡ä»¶ OneToOneMapper.xml</p><p>ä¸€å¯¹ä¸€æ˜ å°„ï¼š</p><ul><li>column å±æ€§è¡¨ç¤ºç»™è¦è°ƒç”¨çš„å…¶å®ƒçš„ select æ ‡ç­¾ä¼ å…¥çš„å‚æ•°</li><li>select å±æ€§è¡¨ç¤ºè°ƒç”¨å…¶å®ƒçš„ select æ ‡ç­¾</li><li>fetchType=&quot;lazy&quot; è¡¨ç¤ºå»¶è¿ŸåŠ è½½ï¼ˆå±€éƒ¨é…ç½®ï¼Œåªæœ‰é…ç½®äº†è¿™ä¸ªçš„åœ°æ–¹æ‰ä¼šå»¶è¿ŸåŠ è½½ï¼‰</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>OneToOneMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--é…ç½®å­—æ®µå’Œå®ä½“å¯¹è±¡å±æ€§çš„æ˜ å°„å…³ç³»--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oneToOne<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>card<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean.Person<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pid<span class="token punctuation">&quot;</span></span> 
                     <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>one_to_one.PersonMapper.findPersonByid<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">fetchType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            		<span class="token comment">&lt;!--éœ€è¦é…ç½®æ–°çš„æ˜ å°„æ–‡ä»¶--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oneToOne<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
        SELECT * FROM card <span class="token comment">&lt;!--æŸ¥è¯¢å…¨éƒ¨ï¼Œè´Ÿè´£æ ¹æ®æ¡ä»¶ç›´æ¥å…¨éƒ¨åŠ è½½--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>PersonMapper.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>one_to_one.PersonMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findPersonByid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        SELECT * FROM person WHERE id=#{pid}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>PersonMapper.java</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PersonMapper</span> <span class="token punctuation">{</span>
    <span class="token class-name">User</span> <span class="token function">findPersonByid</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æµ‹è¯•æ–‡ä»¶</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;MyBatisConfig.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> ssf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> ssf<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">OneToOneMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">OneToOneMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è°ƒç”¨å®ç°ç±»çš„æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
      	<span class="token comment">// ä¸èƒ½éå†ï¼Œéå†å°±æ˜¯ç›¸å½“äºä½¿ç”¨äº†è¯¥æ•°æ®ï¼Œéœ€è¦åŠ è½½ï¼Œä¸éå†å°±æ˜¯æ²¡æœ‰ä½¿ç”¨ã€‚</span>
        
        <span class="token comment">// é‡Šæ”¾èµ„æº</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h4 id="collection" tabindex="-1"><a class="header-anchor" href="#collection" aria-hidden="true">#</a> collection</h4><p>åŒæ ·åœ¨ä¸€å¯¹å¤šå…³ç³»é…ç½®çš„ &lt;collection&gt; ç»“ç‚¹ä¸­é…ç½®å»¶è¿ŸåŠ è½½ç­–ç•¥ï¼Œ&lt;collection&gt; ç»“ç‚¹ä¸­ä¹Ÿæœ‰ select å±æ€§å’Œ column å±æ€§</p><ul><li><p>æ˜ å°„é…ç½®æ–‡ä»¶ OneToManyMapper.xml</p><p>ä¸€å¯¹å¤šæ˜ å°„ï¼š</p><ul><li>column æ˜¯ç”¨äºæŒ‡å®šä½¿ç”¨å“ªä¸ªå­—æ®µçš„å€¼ä½œä¸ºæ¡ä»¶æŸ¥è¯¢</li><li>select æ˜¯ç”¨äºæŒ‡å®šæŸ¥è¯¢è´¦æˆ·çš„å”¯ä¸€æ ‡è¯†ï¼ˆè´¦æˆ·çš„ dao å…¨é™å®šç±»ååŠ ä¸Šæ–¹æ³•åç§°ï¼‰</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>OneToManyMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oneToMany<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean.Classes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token comment">&lt;!--collectionï¼šé…ç½®è¢«åŒ…å«çš„é›†åˆå¯¹è±¡æ˜ å°„å…³ç³»--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>students<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean.Student<span class="token punctuation">&quot;</span></span>
                    <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> 
                    <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>one_to_one.StudentMapper.findStudentByCid<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oneToMany<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      SELECT * FROM classes
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>StudentMapper.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>one_to_one.StudentMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findPersonByCid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        SELECT * FROM person WHERE cid=#{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h2 id="æ³¨è§£å¼€å‘" tabindex="-1"><a class="header-anchor" href="#æ³¨è§£å¼€å‘" aria-hidden="true">#</a> æ³¨è§£å¼€å‘</h2><h3 id="å•è¡¨æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#å•è¡¨æ“ä½œ" aria-hidden="true">#</a> å•è¡¨æ“ä½œ</h3><p>æ³¨è§£å¯ä»¥ç®€åŒ–å¼€å‘æ“ä½œï¼Œçœç•¥æ˜ å°„é…ç½®æ–‡ä»¶çš„ç¼–å†™</p><p>å¸¸ç”¨æ³¨è§£ï¼š</p><ul><li>@Select(â€œæŸ¥è¯¢çš„ SQL è¯­å¥â€)ï¼šæ‰§è¡ŒæŸ¥è¯¢æ“ä½œæ³¨è§£</li><li>@Insert(â€œæ’å…¥çš„ SQL è¯­å¥â€)ï¼šæ‰§è¡Œæ–°å¢æ“ä½œæ³¨è§£</li><li>@Update(â€œä¿®æ”¹çš„ SQL è¯­å¥â€)ï¼šæ‰§è¡Œä¿®æ”¹æ“ä½œæ³¨è§£</li><li>@Delete(â€œåˆ é™¤çš„ SQL è¯­å¥â€)ï¼šæ‰§è¡Œåˆ é™¤æ“ä½œæ³¨è§£</li></ul><p>å‚æ•°æ³¨è§£ï¼š</p><ul><li>@Paramï¼šå½“ SQL è¯­å¥éœ€è¦<strong>å¤šä¸ªï¼ˆå¤§äº1ï¼‰å‚æ•°</strong>æ—¶ï¼Œç”¨æ¥æŒ‡å®šå‚æ•°çš„å¯¹åº”è§„åˆ™</li></ul><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶é…ç½®æ˜ å°„å…³ç³»ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ä½¿ç”¨äº†æ³¨è§£çš„Mapperæ¥å£æ‰€åœ¨åŒ…<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--æˆ–è€…--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
 	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŒ…å.Mapperå<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŸºæœ¬å¢åˆ æ”¹æŸ¥ï¼š</p><ul><li><p>åˆ›å»º Mapper æ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">mapper</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//æŸ¥è¯¢å…¨éƒ¨</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM student&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//æ–°å¢æ•°æ®</span>
    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO student VALUES (#{id},#{name},#{age})&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Integer</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//ä¿®æ”¹æ“ä½œ</span>
    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">&quot;UPDATE student SET name=#{name},age=#{age} WHERE id=#{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Integer</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//åˆ é™¤æ“ä½œ</span>
    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">&quot;DELETE FROM student WHERE id=#{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Integer</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ä¿®æ”¹ MyBatis çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>beanç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æµ‹è¯•ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
    <span class="token comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span>
    <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;MyBatisConfig.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//2.è·å–SqlSessionå·¥å‚å¯¹è±¡</span>
    <span class="token class-name">SqlSessionFactory</span> ssf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//3.é€šè¿‡å·¥å‚å¯¹è±¡è·å–SqlSessionå¯¹è±¡</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> ssf<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//4.è·å–StudentMapperæ¥å£çš„å®ç°ç±»å¯¹è±¡</span>
    <span class="token class-name">StudentMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">StudentMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//5.è°ƒç”¨å®ç°ç±»å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//6.å¤„ç†ç»“æœ</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Student</span> student <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//7.é‡Šæ”¾èµ„æº</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h3 id="å¤šè¡¨æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#å¤šè¡¨æ“ä½œ" aria-hidden="true">#</a> å¤šè¡¨æ“ä½œ</h3><h4 id="ç›¸å…³æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#ç›¸å…³æ³¨è§£" aria-hidden="true">#</a> ç›¸å…³æ³¨è§£</h4><p>å®ç°å¤æ‚å…³ç³»æ˜ å°„ä¹‹å‰æˆ‘ä»¬å¯ä»¥åœ¨æ˜ å°„æ–‡ä»¶ä¸­é€šè¿‡é…ç½® &lt;resultMap&gt; æ¥å®ç°ï¼Œä½¿ç”¨æ³¨è§£å¼€å‘åï¼Œå¯ä»¥ä½¿ç”¨ @Results æ³¨è§£ï¼Œ@Result æ³¨è§£ï¼Œ@One æ³¨è§£ï¼Œ@Many æ³¨è§£ç»„åˆå®Œæˆå¤æ‚å…³ç³»çš„é…ç½®</p><table><thead><tr><th>æ³¨è§£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>@Results</td><td>ä»£æ›¿ &lt;resultMap&gt; æ ‡ç­¾ï¼Œæ³¨è§£ä¸­ä½¿ç”¨å•ä¸ª @Result æ³¨è§£æˆ–è€… @Result é›†åˆ<br>ä½¿ç”¨æ ¼å¼ï¼š@Results({ @Result(), @Result() })æˆ–@Results({ @Result() })</td></tr><tr><td>@Result</td><td>ä»£æ›¿&lt; id&gt; å’Œ &lt;result&gt; æ ‡ç­¾ï¼Œ@Result ä¸­å±æ€§ä»‹ç»ï¼š<br>columnï¼šæ•°æ®åº“çš„åˆ—å propertyï¼šå°è£…ç±»çš„å˜é‡å<br>oneï¼šéœ€è¦ä½¿ç”¨ @One æ³¨è§£ï¼ˆ@Result(one = @One)ï¼‰<br>Manyï¼šéœ€è¦ä½¿ç”¨ @Many æ³¨è§£ï¼ˆ@Result(many= @Many)ï¼‰</td></tr><tr><td>@One(ä¸€å¯¹ä¸€)</td><td>ä»£æ›¿ &lt;association&gt; æ ‡ç­¾ï¼Œå¤šè¡¨æŸ¥è¯¢çš„å…³é”®ï¼Œç”¨æ¥æŒ‡å®šå­æŸ¥è¯¢è¿”å›å•ä¸€å¯¹è±¡<br>selectï¼šæŒ‡å®šè°ƒç”¨ Mapper æ¥å£ä¸­çš„æŸä¸ªæ–¹æ³•<br>ä½¿ç”¨æ ¼å¼ï¼š@Result(column=&quot;&quot;, property=&quot;&quot;, one=@One(select=&quot;&quot;))</td></tr><tr><td>@Many(å¤šå¯¹ä¸€)</td><td>ä»£æ›¿ &lt;collection&gt; æ ‡ç­¾ï¼Œå¤šè¡¨æŸ¥è¯¢çš„å…³é”®ï¼Œç”¨æ¥æŒ‡å®šå­æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆ<br>selectï¼šæŒ‡å®šè°ƒç”¨ Mapper æ¥å£ä¸­çš„æŸä¸ªæ–¹æ³•<br>ä½¿ç”¨æ ¼å¼ï¼š@Result(column=&quot;&quot;, property=&quot;&quot;, many=@Many(select=&quot;&quot;))</td></tr></tbody></table><hr><h4 id="ä¸€å¯¹ä¸€-1" tabindex="-1"><a class="header-anchor" href="#ä¸€å¯¹ä¸€-1" aria-hidden="true">#</a> ä¸€å¯¹ä¸€</h4><p>èº«ä»½è¯å¯¹äºº</p><ul><li><p>PersonMapper æ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PersonMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//æ ¹æ®idæŸ¥è¯¢</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM person WHERE id=#{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Person</span> <span class="token function">selectById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>CardMapperæ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CardMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//æŸ¥è¯¢å…¨éƒ¨</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM card&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>
                    property <span class="token operator">=</span> <span class="token string">&quot;p&quot;</span><span class="token punctuation">,</span>             <span class="token comment">// è¢«åŒ…å«å¯¹è±¡çš„å˜é‡å</span>
                    javaType <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>    <span class="token comment">// è¢«åŒ…å«å¯¹è±¡çš„å®é™…æ•°æ®ç±»å‹</span>
                    column <span class="token operator">=</span> <span class="token string">&quot;pid&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// æ ¹æ®æŸ¥è¯¢å‡ºçš„cardè¡¨ä¸­çš„pidå­—æ®µæ¥æŸ¥è¯¢personè¡¨</span>
                     <span class="token comment">/* 
                     	oneã€@One ä¸€å¯¹ä¸€å›ºå®šå†™æ³•
                        selectå±æ€§ï¼šæŒ‡å®šè°ƒç”¨å“ªä¸ªæ¥å£ä¸­çš„å“ªä¸ªæ–¹æ³•
                     */</span>
                    one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;one_to_one.PersonMapper.selectById&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æµ‹è¯•ç±»ï¼ˆè¯¦ç»†ä»£ç å‚è€ƒå•è¡¨æ“ä½œï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span>
<span class="token comment">//2.è·å–SqlSessionå·¥å‚å¯¹è±¡</span>
<span class="token comment">//3.é€šè¿‡å·¥å‚å¯¹è±¡è·å–SqlSessionå¯¹è±¡</span>

<span class="token comment">//4.è·å–StudentMapperæ¥å£çš„å®ç°ç±»å¯¹è±¡</span>
<span class="token class-name">CardMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">CardMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//5.è°ƒç”¨å®ç°ç±»å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h4 id="ä¸€å¯¹å¤š-1" tabindex="-1"><a class="header-anchor" href="#ä¸€å¯¹å¤š-1" aria-hidden="true">#</a> ä¸€å¯¹å¤š</h4><p>ç­çº§å’Œå­¦ç”Ÿ</p><ul><li><p>StudentMapperæ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//æ ¹æ®cidæŸ¥è¯¢studentè¡¨  cidæ˜¯å¤–é”®çº¦æŸåˆ—</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM student WHERE cid=#{cid}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectByCid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> cid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ClassesMapperæ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ClassesMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//æŸ¥è¯¢å…¨éƒ¨</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM classes&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>
                    property <span class="token operator">=</span> <span class="token string">&quot;students&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//è¢«åŒ…å«å¯¹è±¡çš„å˜é‡å</span>
                    javaType <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>  <span class="token comment">//è¢«åŒ…å«å¯¹è±¡çš„å®é™…æ•°æ®ç±»å‹</span>
                    column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>          <span class="token comment">//æ ¹æ®idå­—æ®µæŸ¥è¯¢studentè¡¨</span>
                    many <span class="token operator">=</span> <span class="token annotation punctuation">@Many</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;one_to_many.StudentMapper.selectByCid&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Classes</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æµ‹è¯•ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//4.è·å–StudentMapperæ¥å£çš„å®ç°ç±»å¯¹è±¡</span>
<span class="token class-name">ClassesMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">ClassesMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//5.è°ƒç”¨å®ç°ç±»å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Classes</span><span class="token punctuation">&gt;</span></span> classes <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h4 id="å¤šå¯¹å¤š-1" tabindex="-1"><a class="header-anchor" href="#å¤šå¯¹å¤š-1" aria-hidden="true">#</a> å¤šå¯¹å¤š</h4><p>å­¦ç”Ÿå’Œè¯¾ç¨‹</p><ul><li><p>SQL æŸ¥è¯¢è¯­å¥</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>SELECT DISTINCT s.id,s.name,s.age FROM student s,stu_cr sc WHERE sc.sid=s.id
SELECT c.id,c.name FROM stu_cr sc,course c WHERE sc.cid=c.id AND sc.sid=#{id}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>CourseMapper æ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CourseMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//æ ¹æ®å­¦ç”ŸidæŸ¥è¯¢æ‰€é€‰è¯¾ç¨‹</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT c.id,c.name FROM stu_cr sc,course c WHERE sc.cid=c.id AND sc.sid=#{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Course</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectBySid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>StudentMapper æ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//æŸ¥è¯¢å…¨éƒ¨</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT DISTINCT s.id,s.name,s.age FROM student s,stu_cr sc WHERE sc.sid=s.id&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>
                    property <span class="token operator">=</span> <span class="token string">&quot;courses&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//è¢«åŒ…å«å¯¹è±¡çš„å˜é‡å</span>
                    javaType <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>  <span class="token comment">//è¢«åŒ…å«å¯¹è±¡çš„å®é™…æ•°æ®ç±»å‹</span>
                    column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token comment">//æ ¹æ®æŸ¥è¯¢å‡ºçš„studentè¡¨ä¸­çš„idå­—æ®µæŸ¥è¯¢ä¸­é—´è¡¨å’Œè¯¾ç¨‹è¡¨</span>
                    many <span class="token operator">=</span> <span class="token annotation punctuation">@Many</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;many_to_many.CourseMapper.selectBySid&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æµ‹è¯•ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//4.è·å–StudentMapperæ¥å£çš„å®ç°ç±»å¯¹è±¡</span>
<span class="token class-name">StudentMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">StudentMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//5.è°ƒç”¨å®ç°ç±»å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> students <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h2 id="ç¼“å­˜æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#ç¼“å­˜æœºåˆ¶" aria-hidden="true">#</a> ç¼“å­˜æœºåˆ¶</h2><h3 id="ç¼“å­˜æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#ç¼“å­˜æ¦‚è¿°" aria-hidden="true">#</a> ç¼“å­˜æ¦‚è¿°</h3><p>ç¼“å­˜ï¼šç¼“å­˜å°±æ˜¯ä¸€å—å†…å­˜ç©ºé—´ï¼Œä¿å­˜ä¸´æ—¶æ•°æ®</p><p>ä½œç”¨ï¼šå°†æ•°æ®æºï¼ˆæ•°æ®åº“æˆ–è€…æ–‡ä»¶ï¼‰ä¸­çš„æ•°æ®è¯»å–å‡ºæ¥å­˜æ”¾åˆ°ç¼“å­˜ä¸­ï¼Œå†æ¬¡è·å–æ—¶ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ï¼Œå¯ä»¥å‡å°‘å’Œæ•°æ®åº“äº¤äº’çš„æ¬¡æ•°ï¼Œæå‡ç¨‹åºçš„æ€§èƒ½</p><p>ç¼“å­˜é€‚ç”¨ï¼š</p><ul><li>é€‚ç”¨äºç¼“å­˜çš„ï¼šç»å¸¸æŸ¥è¯¢ä½†ä¸ç»å¸¸ä¿®æ”¹çš„ï¼Œæ•°æ®çš„æ­£ç¡®ä¸å¦å¯¹æœ€ç»ˆç»“æœå½±å“ä¸å¤§çš„</li><li>ä¸é€‚ç”¨ç¼“å­˜çš„ï¼šç»å¸¸æ”¹å˜çš„æ•°æ® , æ•æ„Ÿæ•°æ®ï¼ˆä¾‹å¦‚ï¼šè‚¡å¸‚çš„ç‰Œä»·ï¼Œé“¶è¡Œçš„æ±‡ç‡ï¼Œé“¶è¡Œå¡é‡Œé¢çš„é’±ï¼‰ç­‰ç­‰</li></ul><p>ç¼“å­˜ç±»åˆ«ï¼š</p><ul><li>ä¸€çº§ç¼“å­˜ï¼šSqlSession çº§åˆ«çš„ç¼“å­˜ï¼Œåˆå«æœ¬åœ°ä¼šè¯ç¼“å­˜ï¼Œè‡ªå¸¦çš„ï¼ˆä¸éœ€è¦é…ç½®ï¼‰ï¼Œä¸€çº§ç¼“å­˜çš„ç”Ÿå‘½å‘¨æœŸä¸ SqlSession ä¸€è‡´ã€‚åœ¨æ“ä½œæ•°æ®åº“æ—¶éœ€è¦æ„é€  SqlSession å¯¹è±¡ï¼Œ<strong>åœ¨å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªæ•°æ®ç»“æ„ï¼ˆHashMapï¼‰ç”¨äºå­˜å‚¨ç¼“å­˜æ•°æ®</strong>ï¼Œä¸åŒçš„ SqlSession ä¹‹é—´çš„ç¼“å­˜æ•°æ®åŒºåŸŸæ˜¯äº’ç›¸ä¸å½±å“çš„</li><li>äºŒçº§ç¼“å­˜ï¼šmapperï¼ˆnamespaceï¼‰çº§åˆ«çš„ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜çš„ä½¿ç”¨ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯ï¼ˆéœ€è¦é…ç½®ï¼‰ã€‚å¤šä¸ª SqlSession å»æ“ä½œåŒä¸€ä¸ª Mapper çš„ SQL å¯ä»¥å…±ç”¨äºŒçº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜æ˜¯è·¨ SqlSession çš„</li></ul><p>å¼€å¯ç¼“å­˜ï¼šé…ç½®æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ &lt;settings&gt; æ ‡ç­¾</p><ul><li>cacheEnabledï¼štrue è¡¨ç¤ºå…¨å±€æ€§åœ°å¼€å¯æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ï¼Œé»˜è®¤ true</li></ul><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/MyBatis-ç¼“å­˜çš„å®ç°åŸç†.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.cnblogs.com/ysocean/p/7342498.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/ysocean/p/7342498.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><h3 id="ä¸€çº§ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#ä¸€çº§ç¼“å­˜" aria-hidden="true">#</a> ä¸€çº§ç¼“å­˜</h3><p>ä¸€çº§ç¼“å­˜æ˜¯ SqlSession çº§åˆ«çš„ç¼“å­˜</p><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/MyBatis-ä¸€çº§ç¼“å­˜.png" style="zoom:67%;"><p>å·¥ä½œæµç¨‹ï¼šç¬¬ä¸€æ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ· id ä¸º 1 çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰ id ä¸º 1 çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œå¾—åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°ä¸€çº§ç¼“å­˜ä¸­ï¼›ç¬¬äºŒæ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ· id ä¸º 1 çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰ id ä¸º 1 çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç¼“å­˜ä¸­æœ‰ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>ä¸€çº§ç¼“å­˜çš„å¤±æ•ˆï¼š</p><ul><li>SqlSession ä¸åŒ</li><li>SqlSession ç›¸åŒï¼ŒæŸ¥è¯¢æ¡ä»¶ä¸åŒæ—¶ï¼ˆè¿˜æœªç¼“å­˜è¯¥æ•°æ®ï¼‰</li><li>SqlSession ç›¸åŒï¼Œæ‰‹åŠ¨æ¸…é™¤äº†ä¸€çº§ç¼“å­˜ï¼Œè°ƒç”¨ <code>sqlSession.clearCache()</code></li><li>SqlSession ç›¸åŒï¼Œæ‰§è¡Œ commit æ“ä½œæˆ–è€…æ‰§è¡Œæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼Œæ¸…ç©º SqlSession ä¸­çš„ä¸€çº§ç¼“å­˜ï¼Œè¿™æ ·åšçš„ç›®çš„ä¸ºäº†è®©ç¼“å­˜ä¸­å­˜å‚¨çš„æ˜¯æœ€æ–°çš„ä¿¡æ¯ï¼Œ<strong>é¿å…è„è¯»</strong></li></ul><p>Spring æ•´åˆ MyBatis åï¼Œä¸€çº§ç¼“å­˜ä½œç”¨ï¼š</p><ul><li>æœªå¼€å¯äº‹åŠ¡çš„æƒ…å†µï¼Œæ¯æ¬¡æŸ¥è¯¢ Spring éƒ½ä¼šåˆ›å»ºæ–°çš„ SqlSessionï¼Œå› æ­¤ä¸€çº§ç¼“å­˜å¤±æ•ˆ</li><li>å¼€å¯äº‹åŠ¡çš„æƒ…å†µï¼ŒSpring ä½¿ç”¨ ThreadLocal è·å–å½“å‰èµ„æºç»‘å®šåŒä¸€ä¸ª SqlSessionï¼Œå› æ­¤æ­¤æ—¶ä¸€çº§ç¼“å­˜æ˜¯æœ‰æ•ˆçš„</li></ul><p>æµ‹è¯•ä¸€çº§ç¼“å­˜å­˜åœ¨</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFirstLevelCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//1. è·å–sqlSessionå¯¹è±¡</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">SqlSessionFactoryUtils</span><span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. é€šè¿‡sqlSessionå¯¹è±¡è·å–UserDaoæ¥å£çš„ä»£ç†å¯¹è±¡</span>
    <span class="token class-name">UserDao</span> userDao1 <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3. è°ƒç”¨UserDaoæ¥å£çš„ä»£ç†å¯¹è±¡çš„findByIdæ–¹æ³•è·å–ä¿¡æ¯</span>
	<span class="token class-name">User</span> user1 <span class="token operator">=</span> userDao1<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//sqlSession.clearCache() æ¸…ç©ºç¼“å­˜</span>
    
   	<span class="token class-name">UserDao</span> userDao2 <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//4.æµ‹è¯•ä¸¤æ¬¡ç»“æœæ˜¯å¦ä¸€æ ·</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user1 <span class="token operator">==</span> user2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
    
    <span class="token comment">//5. æäº¤äº‹åŠ¡å…³é—­èµ„æº</span>
    <span class="token class-name">SqlSessionFactoryUtils</span><span class="token punctuation">.</span><span class="token function">commitAndClose</span><span class="token punctuation">(</span>sqlSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="äºŒçº§ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#äºŒçº§ç¼“å­˜" aria-hidden="true">#</a> äºŒçº§ç¼“å­˜</h3><h4 id="åŸºæœ¬ä»‹ç»-1" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ä»‹ç»-1" aria-hidden="true">#</a> åŸºæœ¬ä»‹ç»</h4><p>äºŒçº§ç¼“å­˜æ˜¯ mapper çš„ç¼“å­˜ï¼Œåªè¦æ˜¯åŒä¸€ä¸ªå‘½åç©ºé—´ï¼ˆnamespaceï¼‰çš„ SqlSession å°±å…±äº«äºŒçº§ç¼“å­˜çš„å†…å®¹ï¼Œå¹¶ä¸”å¯ä»¥æ“ä½œäºŒçº§ç¼“å­˜</p><p>ä½œç”¨ï¼šä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªåº”ç”¨ï¼Œå¯ä»¥è·¨çº¿ç¨‹ä½¿ç”¨ï¼Œé€‚åˆç¼“å­˜ä¸€äº›ä¿®æ”¹è¾ƒå°‘çš„æ•°æ®</p><p>å·¥ä½œæµç¨‹ï¼šä¸€ä¸ªä¼šè¯æŸ¥è¯¢æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼Œå¦‚æœ<strong>ä¼šè¯å…³é—­æˆ–æäº¤</strong>ä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®ä¼šä¿å­˜åˆ°äºŒçº§ç¼“å­˜</p><p>äºŒçº§ç¼“å­˜çš„åŸºæœ¬ä½¿ç”¨ï¼š</p><ol><li><p>åœ¨ MyBatisConfig.xml æ–‡ä»¶å¼€å¯äºŒçº§ç¼“å­˜ï¼Œ<strong>cacheEnabled é»˜è®¤å€¼ä¸º true</strong>ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥å¯ä»¥çœç•¥ä¸é…ç½®</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--é…ç½®å¼€å¯äºŒçº§ç¼“å­˜--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cacheEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>é…ç½® Mapper æ˜ å°„æ–‡ä»¶</p><p><code>&lt;cache&gt;</code> æ ‡ç­¾è¡¨ç¤ºå½“å‰è¿™ä¸ª mapper æ˜ å°„å°†ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼ŒåŒºåˆ†çš„æ ‡å‡†å°±çœ‹ mapper çš„ namespace å€¼</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dao.UserDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--å¼€å¯useræ”¯æŒäºŒçº§ç¼“å­˜--&gt;</span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span> <span class="token attr-name">eviction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FIFO<span class="token punctuation">&quot;</span></span> <span class="token attr-name">flushInterval</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">readOnly</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1024<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cache</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--åˆ™è¡¨ç¤ºæ‰€æœ‰å±æ€§ä½¿ç”¨é»˜è®¤å€¼--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>evictionï¼ˆæ¸…é™¤ç­–ç•¥ï¼‰ï¼š</p><ul><li><code>LRU</code> â€“ æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼šç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ï¼Œé»˜è®¤</li><li><code>FIFO</code> â€“ å…ˆè¿›å…ˆå‡ºï¼šæŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬</li><li><code>SOFT</code> â€“ è½¯å¼•ç”¨ï¼šåŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™ç§»é™¤å¯¹è±¡</li><li><code>WEAK</code> â€“ å¼±å¼•ç”¨ï¼šæ›´ç§¯æåœ°åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™ç§»é™¤å¯¹è±¡</li></ul><p>flushIntervalï¼ˆåˆ·æ–°é—´éš”ï¼‰ï¼šå¯ä»¥è®¾ç½®ä¸ºä»»æ„çš„æ­£æ•´æ•°ï¼Œ é»˜è®¤æƒ…å†µæ˜¯ä¸è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä»…ä»…ä¼šåœ¨è°ƒç”¨è¯­å¥æ—¶åˆ·æ–°</p><p>sizeï¼ˆå¼•ç”¨æ•°ç›®ï¼‰ï¼šç¼“å­˜å­˜æ”¾å¤šå°‘å…ƒç´ ï¼Œé»˜è®¤å€¼æ˜¯ 1024</p><p>readOnlyï¼ˆåªè¯»ï¼‰ï¼šå¯ä»¥è¢«è®¾ç½®ä¸º true æˆ– false</p><ul><li>åªè¯»çš„ç¼“å­˜ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›ç¼“å­˜å¯¹è±¡çš„ç›¸åŒå®ä¾‹ï¼Œå› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ï¼Œä¿ƒè¿›äº†æ€§èƒ½æå‡</li><li>å¯è¯»å†™çš„ç¼“å­˜ä¼šï¼ˆé€šè¿‡åºåˆ—åŒ–ï¼‰è¿”å›ç¼“å­˜å¯¹è±¡çš„æ‹·è´ï¼Œ é€Ÿåº¦ä¸Šä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯æ›´å®‰å…¨ï¼Œå› æ­¤é»˜è®¤å€¼æ˜¯ false</li></ul><p>typeï¼šæŒ‡å®šè‡ªå®šä¹‰ç¼“å­˜çš„å…¨ç±»åï¼Œå®ç° Cache æ¥å£å³å¯</p></li><li><p>è¦è¿›è¡ŒäºŒçº§ç¼“å­˜çš„ç±»å¿…é¡»å®ç° java.io.Serializable æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨åºåˆ—åŒ–æ–¹å¼æ¥ä¿å­˜å¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><hr><h4 id="ç›¸å…³å±æ€§" tabindex="-1"><a class="header-anchor" href="#ç›¸å…³å±æ€§" aria-hidden="true">#</a> ç›¸å…³å±æ€§</h4><ol><li><p>select æ ‡ç­¾çš„ useCache å±æ€§</p><p>æ˜ å°„æ–‡ä»¶ä¸­çš„ <code>&lt;select&gt;</code> æ ‡ç­¾ä¸­è®¾ç½® <code>useCache=&quot;true&quot;</code> ä»£è¡¨å½“å‰ statement è¦ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼ˆé»˜è®¤ï¼‰</p><p>æ³¨æ„ï¼šå¦‚æœæ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦æœ€æ–°çš„æ•°æ® sqlï¼Œè¦è®¾ç½®æˆ useCache=falseï¼Œç¦ç”¨äºŒçº§ç¼“å­˜</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>findAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useCache</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ¯ä¸ªå¢åˆ æ”¹æ ‡ç­¾éƒ½æœ‰ flushCache å±æ€§ï¼Œé»˜è®¤ä¸º trueï¼Œä»£è¡¨åœ¨<strong>æ‰§è¡Œå¢åˆ æ”¹ä¹‹åå°±ä¼šæ¸…é™¤ä¸€ã€äºŒçº§ç¼“å­˜</strong>ï¼Œä¿è¯ç¼“å­˜çš„ä¸€è‡´æ€§ï¼›è€ŒæŸ¥è¯¢æ ‡ç­¾é»˜è®¤å€¼ä¸º falseï¼Œæ‰€ä»¥æŸ¥è¯¢ä¸ä¼šæ¸…ç©ºç¼“å­˜</p></li><li><p>localCacheScopeï¼šæœ¬åœ°ç¼“å­˜ä½œç”¨åŸŸï¼Œ&lt;settings&gt; ä¸­çš„é…ç½®é¡¹ï¼Œé»˜è®¤å€¼ä¸º SESSIONï¼Œå½“å‰ä¼šè¯çš„æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨ä¼šè¯ç¼“å­˜ä¸­ï¼Œè®¾ç½®ä¸º STATEMENT ç¦ç”¨ä¸€çº§ç¼“å­˜</p></li></ol><hr><h4 id="æºç è§£æ" tabindex="-1"><a class="header-anchor" href="#æºç è§£æ" aria-hidden="true">#</a> æºç è§£æ</h4><p>äº‹åŠ¡æäº¤äºŒçº§ç¼“å­˜æ‰ç”Ÿæ•ˆï¼šDefaultSqlSession è°ƒç”¨ commit() æ—¶ä¼šå›è°ƒ <code>executor.commit()</code></p><ul><li><p>CachingExecutor#query()ï¼šæ‰§è¡ŒæŸ¥è¯¢æ–¹æ³•ï¼ŒæŸ¥è¯¢å‡ºçš„æ•°æ®ä¼šå…ˆæ”¾å…¥ entriesToAddOnCommit é›†åˆæš‚å­˜</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// ä»äºŒç¼“å­˜ä¸­è·å–æ•°æ®ï¼Œè·å–ä¸åˆ°å»ä¸€çº§ç¼“å­˜è·å–</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> tcm<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>cache<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å›è°ƒ BaseExecutor#query</span>
    list <span class="token operator">=</span> delegate<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>ms<span class="token punctuation">,</span> parameterObject<span class="token punctuation">,</span> rowBounds<span class="token punctuation">,</span> resultHandler<span class="token punctuation">,</span> key<span class="token punctuation">,</span> boundSql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å°†æ•°æ®æ”¾å…¥ entriesToAddOnCommit é›†åˆæš‚å­˜ï¼Œæ­¤æ—¶è¿˜æ²¡æ”¾å…¥äºŒçº§ç¼“å­˜</span>
    tcm<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>cache<span class="token punctuation">,</span> key<span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>commit()ï¼šäº‹åŠ¡æäº¤ï¼Œ<strong>æ¸…ç©ºä¸€çº§ç¼“å­˜ï¼Œæ”¾å…¥äºŒçº§ç¼“å­˜</strong>ï¼ŒäºŒçº§ç¼“å­˜ä½¿ç”¨ TransactionalCacheManagerï¼ˆtcmï¼‰ç®¡ç†</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> required<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token comment">// é¦–å…ˆè°ƒç”¨ BaseExecutor#commit æ–¹æ³•ï¼Œã€æ¸…ç©ºä¸€çº§ç¼“å­˜ã€‘</span>
    delegate<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span>required<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tcm<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>TransactionalCacheManager#commitï¼šæŸ¥è¯¢å‡ºçš„æ•°æ®æ”¾å…¥äºŒçº§ç¼“å­˜</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–æ‰€æœ‰çš„ç¼“å­˜äº‹åŠ¡ï¼ŒæŒ¨ç€è¿›è¡Œæäº¤</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">TransactionalCache</span> txCache <span class="token operator">:</span> transactionalCaches<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        txCache<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>clearOnCommit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        delegate<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å°† entriesToAddOnCommit ä¸­çš„æ•°æ®æ”¾å…¥äºŒçº§ç¼“å­˜</span>
    <span class="token function">flushPendingEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ¸…ç©ºç›¸å…³é›†åˆ</span>
    <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">flushPendingEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> entry <span class="token operator">:</span> entriesToAddOnCommit<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å°†æ•°æ®æ”¾å…¥äºŒçº§ç¼“å­˜</span>
        delegate<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>å¢åˆ æ”¹æ“ä½œä¼šæ¸…ç©ºç¼“å­˜ï¼š</p><ul><li><p>update()ï¼šCachingExecutor çš„æ›´æ–°æ“ä½œ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">MappedStatement</span> ms<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameterObject<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token function">flushCacheIfRequired</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å›è°ƒ BaseExecutor#update æ–¹æ³•ï¼Œä¹Ÿä¼šæ¸…ç©ºä¸€çº§ç¼“å­˜</span>
    <span class="token keyword">return</span> delegate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>ms<span class="token punctuation">,</span> parameterObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>flushCacheIfRequired()ï¼šåˆ¤æ–­æ˜¯å¦éœ€è¦æ¸…ç©ºäºŒçº§ç¼“å­˜</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">flushCacheIfRequired</span><span class="token punctuation">(</span><span class="token class-name">MappedStatement</span> ms<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Cache</span> cache <span class="token operator">=</span> ms<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆ¤æ–­äºŒçº§ç¼“å­˜æ˜¯å¦å­˜åœ¨ï¼Œç„¶ååˆ¤æ–­æ ‡ç­¾çš„ flushCache çš„å€¼ï¼Œå¢åˆ æ”¹æ“ä½œçš„ flushCache å±æ€§é»˜è®¤ä¸º true</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cache <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> ms<span class="token punctuation">.</span><span class="token function">isFlushCacheRequired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ¸…ç©ºäºŒçº§ç¼“å­˜</span>
        tcm<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>cache<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h3 id="è‡ªå®šä¹‰" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰" aria-hidden="true">#</a> è‡ªå®šä¹‰</h3><p>è‡ªå®šä¹‰ç¼“å­˜</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.domain.something.MyCustomCache<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>type å±æ€§æŒ‡å®šçš„ç±»å¿…é¡»å®ç° org.apache.ibatis.cache.Cache æ¥å£ï¼Œä¸”æä¾›ä¸€ä¸ªæ¥å— String å‚æ•°ä½œä¸º id çš„æ„é€ å™¨</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Cache</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> <span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">void</span> <span class="token function">putObject</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Object</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">boolean</span> <span class="token function">hasKey</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Object</span> <span class="token function">removeObject</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼“å­˜çš„é…ç½®ï¼Œåªéœ€è¦åœ¨ç¼“å­˜å®ç°ä¸­æ·»åŠ å…¬æœ‰çš„ JavaBean å±æ€§ï¼Œç„¶åé€šè¿‡ cache å…ƒç´ ä¼ é€’å±æ€§å€¼ï¼Œä¾‹å¦‚åœ¨ç¼“å­˜å®ç°ä¸Šè°ƒç”¨ä¸€ä¸ªåä¸º <code>setCacheFile(String file)</code> çš„æ–¹æ³•ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.domain.something.MyCustomCache<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cacheFile<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/tmp/my-custom-cache.tmp<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cache</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¯ä»¥ä½¿ç”¨æ‰€æœ‰ç®€å•ç±»å‹ä½œä¸º JavaBean å±æ€§çš„ç±»å‹ï¼ŒMyBatis ä¼šè¿›è¡Œè½¬æ¢ã€‚</li><li>å¯ä»¥ä½¿ç”¨å ä½ç¬¦ï¼ˆå¦‚ <code>${cache.file}</code>ï¼‰ï¼Œä»¥ä¾¿æ›¿æ¢æˆåœ¨é…ç½®æ–‡ä»¶å±æ€§ä¸­å®šä¹‰çš„å€¼</li></ul><p>MyBatis æ”¯æŒåœ¨æ‰€æœ‰å±æ€§è®¾ç½®å®Œæ¯•ä¹‹åï¼Œè°ƒç”¨ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œ å¦‚æœæƒ³è¦ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥åœ¨è‡ªå®šä¹‰ç¼“å­˜ç±»é‡Œå®ç° <code>org.apache.ibatis.builder.InitializingObject</code> æ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">InitializingObject</span> <span class="token punctuation">{</span>
  <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šå¯¹ç¼“å­˜çš„é…ç½®ï¼ˆå¦‚æ¸…é™¤ç­–ç•¥ã€å¯è¯»æˆ–å¯è¯»å†™ç­‰ï¼‰ï¼Œä¸èƒ½åº”ç”¨äºè‡ªå®šä¹‰ç¼“å­˜</p><p>å¯¹æŸä¸€å‘½åç©ºé—´çš„è¯­å¥ï¼Œåªä¼šä½¿ç”¨è¯¥å‘½åç©ºé—´çš„ç¼“å­˜è¿›è¡Œç¼“å­˜æˆ–åˆ·æ–°ï¼Œåœ¨å¤šä¸ªå‘½åç©ºé—´ä¸­å…±äº«ç›¸åŒçš„ç¼“å­˜é…ç½®å’Œå®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨ cache-ref å…ƒç´ æ¥å¼•ç”¨å¦ä¸€ä¸ªç¼“å­˜</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache-ref</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.someone.application.data.SomeMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="æ„é€ è¯­å¥" tabindex="-1"><a class="header-anchor" href="#æ„é€ è¯­å¥" aria-hidden="true">#</a> æ„é€ è¯­å¥</h2><h3 id="åŠ¨æ€-sql" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€-sql" aria-hidden="true">#</a> åŠ¨æ€ SQL</h3><h4 id="åŸºæœ¬ä»‹ç»-2" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ä»‹ç»-2" aria-hidden="true">#</a> åŸºæœ¬ä»‹ç»</h4><p>åŠ¨æ€ SQL æ˜¯ MyBatis å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ï¼Œé€»è¾‘å¤æ‚æ—¶ï¼ŒMyBatis æ˜ å°„é…ç½®æ–‡ä»¶ä¸­ï¼ŒSQL æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œæ‰€ä»¥å¼•å…¥åŠ¨æ€ SQL ç®€åŒ–æ‹¼è£… SQL çš„æ“ä½œ</p><p>DynamicSQL åŒ…å«çš„æ ‡ç­¾ï¼š</p><ul><li>if</li><li>where</li><li>set</li><li>choose (whenã€otherwise)</li><li>trim</li><li>foreach</li></ul><p>å„ä¸ªæ ‡ç­¾éƒ½å¯ä»¥è¿›è¡Œçµæ´»åµŒå¥—å’Œç»„åˆ</p><p>OGNLï¼šObject Graphic Navigation Languageï¼ˆå¯¹è±¡å›¾å¯¼èˆªè¯­è¨€ï¼‰ï¼Œç”¨äºå¯¹æ•°æ®è¿›è¡Œè®¿é—®</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.cnblogs.com/ysocean/p/7289529.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/ysocean/p/7289529.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><h4 id="where" tabindex="-1"><a class="header-anchor" href="#where" aria-hidden="true">#</a> where</h4><p>&lt;where&gt;ï¼šæ¡ä»¶æ ‡ç­¾ï¼Œæœ‰åŠ¨æ€æ¡ä»¶åˆ™ä½¿ç”¨è¯¥æ ‡ç­¾ä»£æ›¿ WHERE å…³é”®å­—ï¼Œå°è£…æŸ¥è¯¢æ¡ä»¶</p><p>ä½œç”¨ï¼šå¦‚æœæ ‡ç­¾è¿”å›çš„å†…å®¹æ˜¯ä»¥ AND æˆ– OR å¼€å¤´çš„ï¼Œæ ‡ç­¾å†…ä¼šå‰”é™¤æ‰</p><p>è¡¨ç»“æ„ï¼š</p><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/MyBatis-åŠ¨æ€sqlç”¨æˆ·è¡¨.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><hr><h4 id="if" tabindex="-1"><a class="header-anchor" href="#if" aria-hidden="true">#</a> if</h4><p>åŸºæœ¬æ ¼å¼ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>â€œæ¡ä»¶åˆ¤æ–­â€</span><span class="token punctuation">&gt;</span></span>
	æŸ¥è¯¢æ¡ä»¶æ‹¼æ¥
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ ¹æ®å®ä½“ç±»çš„ä¸åŒå–å€¼ï¼Œä½¿ç”¨ä¸åŒçš„ SQL è¯­å¥æ¥è¿›è¡ŒæŸ¥è¯¢ã€‚æ¯”å¦‚åœ¨ id å¦‚æœä¸ä¸ºç©ºæ—¶å¯ä»¥æ ¹æ® id æŸ¥è¯¢ï¼Œå¦‚æœusername ä¸åŒç©ºæ—¶è¿˜è¦åŠ å…¥ç”¨æˆ·åä½œä¸ºæ¡ä»¶ï¼Œè¿™ç§æƒ…å†µåœ¨æˆ‘ä»¬çš„å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢ä¸­ç»å¸¸ä¼šç¢°åˆ°ã€‚</p><ul><li><p>UserMapper.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mapper.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectCondition<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        SELECT * FROM user
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id != null <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                id = #{id}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username != null <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                AND username = #{username}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex != null <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                AND sex = #{sex}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>	

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>MyBatisConfig.xmlï¼Œå¼•å…¥æ˜ å°„é…ç½®æ–‡ä»¶</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--mapperå¼•å…¥æŒ‡å®šçš„æ˜ å°„é…ç½® resourceå±æ€§æ‰§è¡Œçš„æ˜ å°„é…ç½®æ–‡ä»¶çš„åç§°--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>DAO å±‚ Mapper æ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//å¤šæ¡ä»¶æŸ¥è¯¢</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectCondition</span><span class="token punctuation">(</span><span class="token class-name">Student</span> stu<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å®ç°ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DynamicTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">selectCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;MyBatisConfig.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.è·å–SqlSessionå·¥å‚å¯¹è±¡</span>
        <span class="token class-name">SqlSessionFactory</span> ssf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3.é€šè¿‡å·¥å‚å¯¹è±¡è·å–SqlSessionå¯¹è±¡</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> ssf<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//4.è·å–StudentMapperæ¥å£çš„å®ç°ç±»å¯¹è±¡</span>
        <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;æå››&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//user.setSex(ç”·); AND åä¼šè‡ªåŠ¨å‰”é™¤</span>

        <span class="token comment">//5.è°ƒç”¨å®ç°ç±»çš„æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectCondition</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//6.å¤„ç†ç»“æœ</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">//7.é‡Šæ”¾èµ„æº</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h4 id="set" tabindex="-1"><a class="header-anchor" href="#set" aria-hidden="true">#</a> set</h4><p>&lt;set&gt;ï¼šè¿›è¡Œæ›´æ–°æ“ä½œçš„æ—¶å€™ï¼Œå«æœ‰ set å…³é”®è¯ï¼Œä½¿ç”¨è¯¥æ ‡ç­¾</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- æ ¹æ® id æ›´æ–° user è¡¨çš„æ•°æ® --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ys.po.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    UPDATE user u
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username != null and username != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                u.username = #{username},
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex != null and sex != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                u.sex = #{sex}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
     WHERE id=#{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶ username ä¸ºç©ºï¼Œé‚£ä¹ˆ sql è¯­å¥ä¸ºï¼šupdate user u set u.sex=? where id=?</li><li>å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆ sql è¯­å¥ä¸ºï¼šupdate user u set u.username = ? ,u.sex = ? where id=?</li></ul><hr><h4 id="choose" tabindex="-1"><a class="header-anchor" href="#choose" aria-hidden="true">#</a> choose</h4><p>å‡å¦‚ä¸æƒ³ç”¨åˆ°æ‰€æœ‰çš„æŸ¥è¯¢æ¡ä»¶ï¼Œåªè¦æŸ¥è¯¢æ¡ä»¶æœ‰ä¸€ä¸ªæ»¡è¶³å³å¯ï¼Œä½¿ç”¨ choose æ ‡ç­¾å¯ä»¥è§£å†³æ­¤ç±»é—®é¢˜ï¼Œç±»ä¼¼äº Java çš„ switch è¯­å¥</p><p>æ ‡ç­¾ï¼š&lt;when&gt;ï¼Œ&lt;otherwise&gt;</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserByChoose<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT * FROM user
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id !=&#39;&#39; and id != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                id=#{id}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username !=&#39;&#39; and username != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                AND username=#{username}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>otherwise</span><span class="token punctuation">&gt;</span></span>
                AND sex=#{sex}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>otherwise</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰ä¸‰ä¸ªæ¡ä»¶ï¼Œidã€usernameã€sexï¼Œåªèƒ½é€‰æ‹©ä¸€ä¸ªä½œä¸ºæŸ¥è¯¢æ¡ä»¶</p><ul><li><p>å¦‚æœ id ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆæŸ¥è¯¢è¯­å¥ä¸ºï¼šselect * from user where id=?</p></li><li><p>å¦‚æœ id ä¸ºç©ºï¼Œé‚£ä¹ˆçœ‹ username æ˜¯å¦ä¸ºç©º</p><ul><li>å¦‚æœä¸ä¸ºç©ºï¼Œé‚£ä¹ˆè¯­å¥ä¸ºï¼šselect * from user where username=?</li><li>å¦‚æœ username ä¸ºç©ºï¼Œé‚£ä¹ˆæŸ¥è¯¢è¯­å¥ä¸º select * from user where sex=?</li></ul></li></ul><hr><h4 id="trim" tabindex="-1"><a class="header-anchor" href="#trim" aria-hidden="true">#</a> trim</h4><p>trim æ ‡è®°æ˜¯ä¸€ä¸ªæ ¼å¼åŒ–çš„æ ‡è®°ï¼Œå¯ä»¥å®Œæˆ set æˆ–è€…æ˜¯ where æ ‡è®°çš„åŠŸèƒ½ï¼Œè‡ªå®šä¹‰å­—ç¬¦ä¸²æˆªå–</p><ul><li>prefixï¼šç»™æ‹¼ä¸²åçš„æ•´ä¸ªå­—ç¬¦ä¸²åŠ ä¸€ä¸ªå‰ç¼€ï¼Œtrim æ ‡ç­¾ä½“ä¸­æ˜¯æ•´ä¸ªå­—ç¬¦ä¸²æ‹¼ä¸²åçš„ç»“æœ</li><li>prefixOverridesï¼šå»æ‰æ•´ä¸ªå­—ç¬¦ä¸²å‰é¢å¤šä½™çš„å­—ç¬¦</li><li>suffixï¼šç»™æ‹¼ä¸²åçš„æ•´ä¸ªå­—ç¬¦ä¸²åŠ ä¸€ä¸ªåç¼€</li><li>suffixOverridesï¼šå»æ‰æ•´ä¸ªå­—ç¬¦ä¸²åé¢å¤šä½™çš„å­—ç¬¦</li></ul><p>æ”¹å†™ if + where è¯­å¥ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserByUsernameAndSex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ys.po.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT * FROM user
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>where<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prefixOverrides</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>and | or<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            AND username=#{username}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            AND sex=#{sex}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ”¹å†™ if + set è¯­å¥ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- æ ¹æ® id æ›´æ–° user è¡¨çš„æ•°æ® --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ys.po.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    UPDATE user u
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>set<span class="token punctuation">&quot;</span></span> <span class="token attr-name">suffixOverrides</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username != null and username != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            u.username = #{username},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex != null and sex != &#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            u.sex = #{sex},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">&gt;</span></span>
    WHERE id=#{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="foreach" tabindex="-1"><a class="header-anchor" href="#foreach" aria-hidden="true">#</a> foreach</h4><p>åŸºæœ¬æ ¼å¼ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span><span class="token punctuation">&gt;</span></span>ï¼šå¾ªç¯éå†æ ‡ç­¾ã€‚é€‚ç”¨äºå¤šä¸ªå‚æ•°æˆ–è€…çš„å…³ç³»ã€‚
    &lt;foreach collection=â€œâ€open=â€œâ€close=â€œâ€item=â€œâ€separator=â€œâ€&gt;
		è·å–å‚æ•°
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å±æ€§ï¼š</p><ul><li>collectionï¼šå‚æ•°å®¹å™¨ç±»å‹ï¼Œ (list-é›†åˆï¼Œ array-æ•°ç»„)</li><li>openï¼šå¼€å§‹çš„ SQL è¯­å¥</li><li>closeï¼šç»“æŸçš„ SQL è¯­å¥</li><li>itemï¼šå‚æ•°å˜é‡å</li><li>separatorï¼šåˆ†éš”ç¬¦</li></ul><p>éœ€æ±‚ï¼šå¾ªç¯æ‰§è¡Œ sql çš„æ‹¼æ¥æ“ä½œï¼Œ<code>SELECT * FROM user WHERE id IN (1,2,5)</code></p><ul><li><p>UserMapper.xmlç‰‡æ®µ</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectByIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT * FROM student
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id IN(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            #{id}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æµ‹è¯•ä»£ç ç‰‡æ®µ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//4.è·å–StudentMapperæ¥å£çš„å®ç°ç±»å¯¹è±¡</span>
<span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//5.è°ƒç”¨å®ç°ç±»çš„æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectByIds</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h4 id="sqlç‰‡æ®µ" tabindex="-1"><a class="header-anchor" href="#sqlç‰‡æ®µ" aria-hidden="true">#</a> SQLç‰‡æ®µ</h4><p>å°†ä¸€äº›é‡å¤æ€§çš„ SQL è¯­å¥è¿›è¡ŒæŠ½å–ï¼Œä»¥è¾¾åˆ°å¤ç”¨çš„æ•ˆæœ</p><p>æ ¼å¼ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>â€œç‰‡æ®µå”¯ä¸€æ ‡è¯†â€</span><span class="token punctuation">&gt;</span></span>æŠ½å–çš„SQLè¯­å¥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>		<span class="token comment">&lt;!--æŠ½å–æ ‡ç­¾--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>â€œç‰‡æ®µå”¯ä¸€æ ‡è¯†â€/</span><span class="token punctuation">&gt;</span></span>				<span class="token comment">&lt;!--å¼•å…¥æ ‡ç­¾--&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>SELECT * FROM user<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectByIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id IN(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            #{id}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="é€†å‘å·¥ç¨‹" tabindex="-1"><a class="header-anchor" href="#é€†å‘å·¥ç¨‹" aria-hidden="true">#</a> é€†å‘å·¥ç¨‹</h3><p>MyBatis é€†å‘å·¥ç¨‹ï¼Œå¯ä»¥é’ˆå¯¹<strong>å•è¡¨</strong>è‡ªåŠ¨ç”Ÿæˆ MyBatis æ‰§è¡Œæ‰€éœ€è¦çš„ä»£ç ï¼ˆmapper.javaã€mapper.xmlã€pojoâ€¦ï¼‰</p><p>generatorConfig.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">generatorConfiguration</span>
  <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span>
  <span class="token string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>generatorConfiguration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testTables<span class="token punctuation">&quot;</span></span> <span class="token attr-name">targetRuntime</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyBatis3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>commentGenerator</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- æ˜¯å¦å»é™¤è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Š trueï¼šæ˜¯ ï¼š false:å¦ --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>suppressAllComments<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>commentGenerator</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--æ•°æ®åº“è¿æ¥çš„ä¿¡æ¯ï¼šé©±åŠ¨ç±»ã€è¿æ¥åœ°å€ã€ç”¨æˆ·åã€å¯†ç  --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jdbcConnection</span> <span class="token attr-name">driverClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">connectionURL</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/mybatisrelation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">userId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jdbcConnection</span><span class="token punctuation">&gt;</span></span>
 
        <span class="token comment">&lt;!-- é»˜è®¤falseï¼ŒæŠŠJDBC DECIMAL å’Œ NUMERIC ç±»å‹è§£æä¸º Integerï¼Œä¸º trueæ—¶æŠŠJDBC DECIMALå’ŒNUMERICç±»å‹è§£æä¸ºjava.math.BigDecimal --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>javaTypeResolver</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>forceBigDecimals<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>javaTypeResolver</span><span class="token punctuation">&gt;</span></span>
 
        <span class="token comment">&lt;!-- targetProject:ç”ŸæˆPOç±»çš„ä½ç½®ï¼ï¼ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>javaModelGenerator</span> <span class="token attr-name">targetPackage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ys.po<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">targetProject</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.\src<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- enableSubPackages:æ˜¯å¦è®©schemaä½œä¸ºåŒ…çš„åç¼€ --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enableSubPackages<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!-- ä»æ•°æ®åº“è¿”å›çš„å€¼è¢«æ¸…ç†å‰åçš„ç©ºæ ¼ --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>trimStrings<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>javaModelGenerator</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- targetProject:mapperæ˜ å°„æ–‡ä»¶ç”Ÿæˆçš„ä½ç½®ï¼ï¼ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sqlMapGenerator</span> <span class="token attr-name">targetPackage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ys.mapper<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">targetProject</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.\src<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enableSubPackages<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sqlMapGenerator</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- targetPackageï¼šmapperæ¥å£ç”Ÿæˆçš„ä½ç½®ï¼Œé‡è¦ï¼ï¼ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>javaClientGenerator</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>XMLMAPPER<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">targetPackage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ys.mapper<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">targetProject</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.\src<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enableSubPackages<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>javaClientGenerator</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- æŒ‡å®šæ•°æ®åº“è¡¨ï¼Œè¦ç”Ÿæˆå“ªäº›è¡¨ï¼Œå°±å†™å“ªäº›è¡¨ï¼Œè¦å’Œæ•°æ®åº“ä¸­å¯¹åº”ï¼Œä¸èƒ½å†™é”™ï¼ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orders<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderdetail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>       
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>generatorConfiguration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”Ÿæˆä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> warnings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> overwrite <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">//æŒ‡å‘é€†å‘å·¥ç¨‹é…ç½®æ–‡ä»¶</span>
    <span class="token class-name">File</span> configFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token class-name">GeneratorTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span>
                               <span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">&quot;/generatorConfig.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ConfigurationParser</span> cp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConfigurationParser</span><span class="token punctuation">(</span>warnings<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Configuration</span> config <span class="token operator">=</span> cp<span class="token punctuation">.</span><span class="token function">parseConfiguration</span><span class="token punctuation">(</span>configFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">DefaultShellCallback</span> callback <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultShellCallback</span><span class="token punctuation">(</span>overwrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MyBatisGenerator</span> myBatisGenerator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyBatisGenerator</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span>
                                                             callback<span class="token punctuation">,</span> warnings<span class="token punctuation">)</span><span class="token punctuation">;</span>
    myBatisGenerator<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.cnblogs.com/ysocean/p/7360409.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/ysocean/p/7360409.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><h3 id="æ„å»º-sql" tabindex="-1"><a class="header-anchor" href="#æ„å»º-sql" aria-hidden="true">#</a> æ„å»º SQL</h3><h4 id="åŸºç¡€è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€è¯­æ³•" aria-hidden="true">#</a> åŸºç¡€è¯­æ³•</h4><p>MyBatis æä¾›äº† org.apache.ibatis.jdbc.SQL åŠŸèƒ½ç±»ï¼Œä¸“é—¨ç”¨äºæ„å»º SQL è¯­å¥</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>SELECT(String... columns)</td><td>æ ¹æ®å­—æ®µæ‹¼æ¥æŸ¥è¯¢è¯­å¥</td></tr><tr><td>FROM(String... tables)</td><td>æ ¹æ®è¡¨åæ‹¼æ¥è¯­å¥</td></tr><tr><td>WHERE(String... conditions)</td><td>æ ¹æ®æ¡ä»¶æ‹¼æ¥è¯­å¥</td></tr><tr><td>INSERT_INTO(String tableName)</td><td>æ ¹æ®è¡¨åæ‹¼æ¥æ–°å¢è¯­å¥</td></tr><tr><td>INTO_VALUES(String... values)</td><td>æ ¹æ®å€¼æ‹¼æ¥æ–°å¢è¯­å¥</td></tr><tr><td>UPDATE(String table)</td><td>æ ¹æ®è¡¨åæ‹¼æ¥ä¿®æ”¹è¯­å¥</td></tr><tr><td>DELETE_FROM(String table)</td><td>æ ¹æ®è¡¨åæ‹¼æ¥åˆ é™¤è¯­å¥</td></tr></tbody></table><p>å¢åˆ æ”¹æŸ¥æ³¨è§£ï¼š</p><ul><li>@SelectProviderï¼šç”ŸæˆæŸ¥è¯¢ç”¨çš„ SQL è¯­å¥</li><li>@InsertProviderï¼šç”Ÿæˆæ–°å¢ç”¨çš„ SQL è¯­å¥</li><li>@UpdateProviderï¼šç”Ÿæˆä¿®æ”¹ç”¨çš„ SQL è¯­å¥æ³¨è§£</li><li>@DeleteProviderï¼šç”Ÿæˆåˆ é™¤ç”¨çš„ SQL è¯­å¥æ³¨è§£ã€‚ <ul><li>type å±æ€§ï¼šç”Ÿæˆ SQL è¯­å¥åŠŸèƒ½ç±»å¯¹è±¡</li><li>method å±æ€§ï¼šæŒ‡å®šè°ƒç”¨æ–¹æ³•</li></ul></li></ul><hr><h4 id="åŸºæœ¬æ“ä½œ-1" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ“ä½œ-1" aria-hidden="true">#</a> åŸºæœ¬æ“ä½œ</h4><ul><li><p>MyBatisConfig.xml é…ç½®</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code> <span class="token comment">&lt;!-- mapperså¼•å…¥æ˜ å°„é…ç½®æ–‡ä»¶ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Mapper ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//æŸ¥è¯¢å…¨éƒ¨</span>
    <span class="token annotation punctuation">@SelectProvider</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">ReturnSql</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;getSelectAll&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//æ–°å¢æ•°æ®</span>
    <span class="token annotation punctuation">@InsertProvider</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">ReturnSql</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;getInsert&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Integer</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//ä¿®æ”¹æ“ä½œ</span>
    <span class="token annotation punctuation">@UpdateProvider</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">ReturnSql</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;getUpdate&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Integer</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//åˆ é™¤æ“ä½œ</span>
    <span class="token annotation punctuation">@DeleteProvider</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">ReturnSql</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">&quot;getDelete&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Integer</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ReturnSQL ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReturnSql</span> <span class="token punctuation">{</span>
    <span class="token comment">//å®šä¹‰æ–¹æ³•ï¼Œè¿”å›æŸ¥è¯¢çš„sqlè¯­å¥</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSelectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">{</span>
                <span class="token function">SELECT</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">FROM</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//å®šä¹‰æ–¹æ³•ï¼Œè¿”å›æ–°å¢çš„sqlè¯­å¥</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getInsert</span><span class="token punctuation">(</span><span class="token class-name">Student</span> stu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">{</span>
                <span class="token function">INSERT_INTO</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">INTO_VALUES</span><span class="token punctuation">(</span><span class="token string">&quot;#{id},#{name},#{age}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//å®šä¹‰æ–¹æ³•ï¼Œè¿”å›ä¿®æ”¹çš„sqlè¯­å¥</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUpdate</span><span class="token punctuation">(</span><span class="token class-name">Student</span> stu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">{</span>
                <span class="token function">UPDATE</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">SET</span><span class="token punctuation">(</span><span class="token string">&quot;name=#{name}&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;age=#{age}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">WHERE</span><span class="token punctuation">(</span><span class="token string">&quot;id=#{id}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//å®šä¹‰æ–¹æ³•ï¼Œè¿”å›åˆ é™¤çš„sqlè¯­å¥</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDelete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">{</span>
                <span class="token function">DELETE_FROM</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">WHERE</span><span class="token punctuation">(</span><span class="token string">&quot;id=#{id}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>åŠŸèƒ½å®ç°ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SqlTest</span> <span class="token punctuation">{</span>	
	<span class="token annotation punctuation">@Test</span>  <span class="token comment">//æŸ¥è¯¢å…¨éƒ¨</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//1.åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;MyBatisConfig.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.è·å–SqlSessionå·¥å‚å¯¹è±¡</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3.é€šè¿‡å·¥å‚å¯¹è±¡è·å–SqlSessionå¯¹è±¡</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//4.è·å–StudentMapperæ¥å£çš„å®ç°ç±»å¯¹è±¡</span>
        <span class="token class-name">StudentMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">StudentMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//5.è°ƒç”¨å®ç°ç±»å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//6.å¤„ç†ç»“æœ</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Student</span> student <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//7.é‡Šæ”¾èµ„æº</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Test</span>  <span class="token comment">//æ–°å¢</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//1 2 3 4è·å–StudentMapperæ¥å£çš„å®ç°ç±»å¯¹è±¡</span>
        <span class="token class-name">StudentMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">StudentMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//5.è°ƒç”¨å®ç°ç±»å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ -&gt;6 7</span>
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&quot;èµµå…­&quot;</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> result <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Test</span> <span class="token comment">//ä¿®æ”¹</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//1 2 3 4 5è°ƒç”¨å®ç°ç±»å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œæ¥æ”¶ç»“æœ -&gt;6 7 </span>
		<span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&quot;èµµå…­wq&quot;</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> result <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span> <span class="token comment">//åˆ é™¤</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//1 2 3 4 5 6 7</span>
        <span class="token class-name">Integer</span> result <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h2 id="è¿è¡ŒåŸç†" tabindex="-1"><a class="header-anchor" href="#è¿è¡ŒåŸç†" aria-hidden="true">#</a> è¿è¡ŒåŸç†</h2><h3 id="è¿è¡Œæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œæœºåˆ¶" aria-hidden="true">#</a> è¿è¡Œæœºåˆ¶</h3><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/MyBatis-æ‰§è¡Œæµç¨‹.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>MyBatis è¿è¡Œè¿‡ç¨‹ï¼š</p><ol><li><p>åŠ è½½ MyBatis å…¨å±€é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡ XPath æ–¹å¼è§£æ XML é…ç½®æ–‡ä»¶ï¼Œé¦–å…ˆè§£ææ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œ&lt;settings&gt; æ ‡ç­¾ä¸­é…ç½®å±æ€§é¡¹æœ‰ defaultExecutorTypeï¼Œç”¨æ¥é…ç½®æŒ‡å®š Executor ç±»å‹ï¼Œå°†é…ç½®æ–‡ä»¶çš„ä¿¡æ¯å¡«å……åˆ° Configurationå¯¹è±¡ã€‚æœ€åè§£ææ˜ å°„å™¨é…ç½®çš„æ˜ å°„æ–‡ä»¶ï¼Œå¹¶<strong>æ„å»º MappedStatement å¯¹è±¡å¡«å……è‡³ Configuration</strong>ï¼Œå°†è§£æåçš„æ˜ å°„å™¨æ·»åŠ åˆ° mapperRegistry ä¸­ï¼Œç”¨äºè·å–ä»£ç†</p></li><li><p>åˆ›å»ºä¸€ä¸ª DefaultSqlSession å¯¹è±¡ï¼Œ<strong>æ ¹æ®å‚æ•°åˆ›å»ºæŒ‡å®šç±»å‹çš„ Executor</strong>ï¼ŒäºŒçº§ç¼“å­˜é»˜è®¤å¼€å¯ï¼ŒæŠŠ Executor åŒ…è£…æˆç¼“å­˜æ‰§è¡Œå™¨</p></li><li><p>DefaulSqlSession è°ƒç”¨ getMapper()ï¼Œé€šè¿‡ JDK åŠ¨æ€ä»£ç†è·å– Mapper æ¥å£çš„ä»£ç†å¯¹è±¡ MapperProxy</p></li><li><p>æ‰§è¡Œ SQL è¯­å¥ï¼š</p><ul><li>MapperProxy.invoke() æ‰§è¡Œä»£ç†æ–¹æ³•ï¼Œé€šè¿‡ MapperMethod#execute åˆ¤æ–­æ‰§è¡Œçš„æ˜¯å¢åˆ æ”¹æŸ¥ä¸­çš„å“ªä¸ªæ–¹æ³•</li><li>æŸ¥è¯¢æ–¹æ³•è°ƒç”¨ sqlSession.selectOne()ï¼Œä» Configuration ä¸­è·å–æ‰§è¡Œè€…å¯¹è±¡ MappedStatementï¼Œç„¶å Executor è°ƒç”¨ executor.query å¼€å§‹æ‰§è¡ŒæŸ¥è¯¢æ–¹æ³•</li><li>é¦–å…ˆé€šè¿‡ CachingExecutor å»äºŒçº§ç¼“å­˜æŸ¥è¯¢ï¼ŒæŸ¥è¯¢ä¸åˆ°å»ä¸€çº§ç¼“å­˜æŸ¥è¯¢ï¼Œ<strong>æœ€åå»æ•°æ®åº“æŸ¥è¯¢å¹¶æ”¾å…¥ä¸€çº§ç¼“å­˜</strong></li><li>Configuration å¯¹è±¡æ ¹æ® &lt;select&gt; æ ‡ç­¾çš„ statementType å±æ€§åˆ›å»º StatementHandler å¯¹è±¡ï¼Œåœ¨ StatementHandler çš„æ„é€ æ–¹æ³•ä¸­ï¼Œåˆ›å»ºäº† ParameterHandler å’Œ ResultSetHandler å¯¹è±¡</li><li>æœ€åè·å– <strong>JDBC åŸç”Ÿçš„</strong> Connection æ•°æ®åº“è¿æ¥å¯¹è±¡ï¼Œåˆ›å»º Statement æ‰§è¡Œè€…å¯¹è±¡ï¼Œç„¶åé€šè¿‡ ParameterHandler è®¾ç½®é¢„ç¼–è¯‘å‚æ•°ï¼Œåº•å±‚æ˜¯ TypeHandler#setParameter æ–¹æ³•ï¼Œç„¶åé€šè¿‡ StatementHandler å›è°ƒæ‰§è¡Œè€…å¯¹è±¡æ‰§è¡Œå¢åˆ æ”¹æŸ¥ï¼Œæœ€åè°ƒç”¨ ResultsetHandler å¤„ç†æŸ¥è¯¢ç»“æœ</li></ul></li></ol><p><strong>å››å¤§å¯¹è±¡</strong>ï¼š</p><ul><li>StatementHandlerï¼šæ‰§è¡Œ SQL è¯­å¥çš„å¯¹è±¡</li><li>ParameterHandlerï¼šè®¾ç½®é¢„ç¼–è¯‘å‚æ•°ç”¨çš„</li><li>ResultHandlerï¼šå¤„ç†ç»“æœé›†</li><li>Executorï¼šæ‰§è¡Œå™¨ï¼ŒçœŸæ­£è¿›è¡Œ Java ä¸æ•°æ®åº“äº¤äº’çš„å¯¹è±¡</li></ul><p>å‚è€ƒè§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV1mW411M737?p=71" target="_blank" rel="noopener noreferrer">https://www.bilibili.com/video/BV1mW411M737?p=71<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><h3 id="è·å–å·¥å‚" tabindex="-1"><a class="header-anchor" href="#è·å–å·¥å‚" aria-hidden="true">#</a> è·å–å·¥å‚</h3><p>SqlSessionFactoryBuilder.build(InputStream, String, Properties)ï¼šæ„å»ºå·¥å‚</p><p>XMLConfigBuilder.parse()ï¼šè§£ææ ¸å¿ƒé…ç½®æ–‡ä»¶æ¯ä¸ªæ ‡ç­¾çš„ä¿¡æ¯ï¼ˆ<strong>XPath</strong>ï¼‰</p><ul><li><p><code>parseConfiguration(parser.evalNode(&quot;/configuration&quot;))</code>ï¼šè¯»å–èŠ‚ç‚¹å†…æ•°æ®ï¼Œ&lt;configuration&gt; æ˜¯ MyBatis é…ç½®æ–‡ä»¶ä¸­çš„é¡¶å±‚æ ‡ç­¾</p><p><code>settings = settingsAsProperties(root.evalNode(&quot;settings&quot;))</code>ï¼šè¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­çš„ &lt;settings&gt; æ ‡ç­¾</p><p><code>settingsElement(settings)</code>ï¼šè®¾ç½®æ¡†æ¶ç›¸å…³çš„å±æ€§</p><ul><li><code>configuration.setCacheEnabled()</code>ï¼š<strong>è®¾ç½®ç¼“å­˜å±æ€§ï¼Œé»˜è®¤æ˜¯ true</strong></li><li><code>configuration.setDefaultExecutorType()</code>ï¼š<strong>è®¾ç½® Executor ç±»å‹åˆ° configurationï¼Œé»˜è®¤æ˜¯ SIMPLE</strong></li></ul><p><code>mapperElement(root.evalNode(&quot;mappers&quot;))</code>ï¼šè§£æ mappers ä¿¡æ¯ï¼Œåˆ†ä¸º package å’Œ å•ä¸ªæ³¨å†Œä¸¤ç§</p><ul><li><p><code>if...else...</code>ï¼šæ ¹æ®æ˜ å°„æ–¹æ³•é€‰æ‹©åˆé€‚çš„è¯»å–æ–¹å¼</p></li><li><p><code>XMLMapperBuilder.parse()</code>ï¼šè§£æ mapper çš„æ ‡ç­¾çš„ä¿¡æ¯</p><ul><li><p><code>configurationElement(parser.evalNode(&quot;/mapper&quot;))</code>ï¼šè§£æ mapper æ–‡ä»¶ï¼Œé¡¶å±‚èŠ‚ç‚¹ &lt;mapper&gt;</p><ul><li><p><code>buildStatementFromContext(context.evalNodes(&quot;select...&quot;))</code>ï¼šè§£æ<strong>æ¯ä¸ªæ“ä½œæ ‡ç­¾</strong></p><p><code>XMLStatementBuilder.parseStatementNode()</code>ï¼šè§£æ<strong>æ“ä½œæ ‡ç­¾</strong>çš„æ‰€æœ‰çš„å±æ€§</p><p><code>builderAssistant.addMappedStatement(...)</code>ï¼š<strong>å°è£…æˆ MappedStatement å¯¹è±¡åŠ å…¥ Configuration å¯¹è±¡</strong>ï¼Œä»£è¡¨ä¸€ä¸ªå¢åˆ æ”¹æŸ¥çš„æ ‡ç­¾</p></li></ul></li></ul></li><li><p><code>Class&lt;?&gt; mapperInterface = Resources.classForName(mapperClass)</code>ï¼šåŠ è½½ Mapper æ¥å£</p></li><li><p><code>Configuration.addMappers()</code>ï¼šå°†æ ¸å¿ƒé…ç½®æ–‡ä»¶é…ç½®çš„æ˜ å°„å™¨æ·»åŠ åˆ° mapperRegistry ä¸­ï¼Œç”¨æ¥<strong>è·å–ä»£ç†å¯¹è±¡</strong></p><ul><li><p><code>MapperAnnotationBuilder parser = new MapperAnnotationBuilder(config, type)</code>ï¼šåˆ›å»º<strong>æ³¨è§£</strong>è§£æå™¨</p></li><li><p><code>parser.parse()</code>ï¼šè§£æ Mapper æ¥å£</p><ul><li><p><code>SqlSource sqlSource = getSqlSourceFromAnnotations()</code>ï¼šè·å– SQL çš„èµ„æºå¯¹è±¡</p><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/MyBatis-SQLèµ„æºå¯¹è±¡.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p><code>builderAssistant.addMappedStatement(...)</code>ï¼šå°è£…æˆ MappedStatement å¯¹è±¡åŠ å…¥ Configuration å¯¹è±¡</p></li></ul></li></ul></li></ul></li><li><p><code>return configuration</code>ï¼šè¿”å›é…ç½®å®Œæˆçš„ configuration å¯¹è±¡</p></li></ul><p>return new DefaultSqlSessionFactory(config)ï¼šè¿”å›å·¥å‚å¯¹è±¡ï¼ŒåŒ…å« Configuration å¯¹è±¡</p><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/MyBatis-è·å–å·¥å‚å¯¹è±¡.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ€»ç»“ï¼šè§£æ XML æ˜¯å¯¹ Configuration ä¸­çš„å±æ€§è¿›è¡Œå¡«å……ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ä¸€ä¸ªç±»ä¸­åˆ›å»º Configuration å¯¹è±¡ï¼Œè‡ªå®šä¹‰å…¶ä¸­å±æ€§çš„å€¼æ¥è¾¾åˆ°é…ç½®çš„æ•ˆæœ</p><hr><h3 id="è·å–ä¼šè¯" tabindex="-1"><a class="header-anchor" href="#è·å–ä¼šè¯" aria-hidden="true">#</a> è·å–ä¼šè¯</h3><p>DefaultSqlSessionFactory.openSession()ï¼šè·å– Session å¯¹è±¡ï¼Œå¹¶ä¸”åˆ›å»º Executor å¯¹è±¡</p><p>DefaultSqlSessionFactory.openSessionFromDataSource(...)ï¼šExecutorType ä¸º Executor çš„ç±»å‹ï¼ŒTransactionIsolationLevel ä¸ºäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŒautoCommit æ˜¯å¦å¼€å¯äº‹åŠ¡</p><ul><li><p><code>transactionFactory.newTransaction(DataSource, IsolationLevel, boolean</code>ï¼šäº‹åŠ¡å¯¹è±¡</p></li><li><p><code>configuration.newExecutor(tx, execType)</code>ï¼š<strong>æ ¹æ®å‚æ•°åˆ›å»ºæŒ‡å®šç±»å‹çš„ Executor</strong></p><ul><li>æ‰¹é‡æ“ä½œç¬”è®°çš„éƒ¨åˆ†æœ‰è®²è§£åˆ° &lt;setting&gt; çš„å±æ€§ defaultExecutorTypeï¼Œæ ¹æ®é…ç½®åˆ›å»ºå¯¹è±¡</li><li><strong>äºŒçº§ç¼“å­˜é»˜è®¤å¼€å¯</strong>ï¼Œä¼šåŒ…è£… Executor å¯¹è±¡ <code>new CachingExecutor(executor)</code></li></ul></li></ul><p>return new DefaultSqlSession(configuration, executor, autoCommit)ï¼šè¿”å› DefaultSqlSession å¯¹è±¡</p><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/MyBatis-è·å–ä¼šè¯å¯¹è±¡.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><hr><h3 id="è·å–ä»£ç†" tabindex="-1"><a class="header-anchor" href="#è·å–ä»£ç†" aria-hidden="true">#</a> è·å–ä»£ç†</h3><p>Configuration.getMapper(Class, SqlSession)ï¼šè·å–ä»£ç†çš„ mapper å¯¹è±¡</p><p>MapperRegistry.getMapper(Class, SqlSession)ï¼šMapperRegistry æ˜¯ Configuration å±æ€§ï¼Œåœ¨è·å–å·¥å‚å¯¹è±¡æ—¶åˆå§‹åŒ–</p><ul><li><code>(MapperProxyFactory&lt;T&gt;) knownMappers.get(type)</code>ï¼šè·å–æ¥å£ä¿¡æ¯å°è£…ä¸º MapperProxyFactory å¯¹è±¡</li><li><code>mapperProxyFactory.newInstance(sqlSession)</code>ï¼š<strong>åˆ›å»ºä»£ç†å¯¹è±¡</strong><ul><li><code>new MapperProxy&lt;&gt;(sqlSession, mapperInterface, methodCache)</code>ï¼šåŒ…è£…å¯¹è±¡ <ul><li>methodCache æ˜¯å¹¶å‘å®‰å…¨çš„ ConcurrentHashMap é›†åˆï¼Œå­˜æ”¾è¦æ‰§è¡Œçš„æ–¹æ³•</li><li><code>MapperProxy&lt;T&gt; implements InvocationHandler</code> è¯´æ˜ MapperProxy é»˜è®¤æ˜¯ä¸€ä¸ª InvocationHandler å¯¹è±¡</li></ul></li><li><code>Proxy.newProxyInstance()</code>ï¼š<strong>JDK åŠ¨æ€ä»£ç†</strong>åˆ›å»º MapperProxy å¯¹è±¡</li></ul></li></ul><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/MyBatis-è·å–ä»£ç†å¯¹è±¡.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><hr><h3 id="æ‰§è¡Œsql" tabindex="-1"><a class="header-anchor" href="#æ‰§è¡Œsql" aria-hidden="true">#</a> æ‰§è¡ŒSQL</h3><p>MapperProxy.invoke()ï¼šæ‰§è¡Œ SQL è¯­å¥ï¼ŒObject ç±»çš„æ–¹æ³•ç›´æ¥æ‰§è¡Œ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// å½“å‰æ–¹æ³•æ˜¯å¦æ˜¯å±äº Object ç±»ä¸­çš„æ–¹æ³•</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getDeclaringClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// å½“å‰æ–¹æ³•æ˜¯å¦æ˜¯é»˜è®¤æ–¹æ³•</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDefaultMethod</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">invokeDefaultMethod</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> method<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token class-name">ExceptionUtil</span><span class="token punctuation">.</span><span class="token function">unwrapThrowable</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// åŒ…è£…æˆä¸€ä¸ª MapperMethod å¯¹è±¡å¹¶åˆå§‹åŒ–è¯¥å¯¹è±¡</span>
    <span class="token keyword">final</span> <span class="token class-name">MapperMethod</span> mapperMethod <span class="token operator">=</span> <span class="token function">cachedMapperMethod</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ã€æ ¹æ® switch-case åˆ¤æ–­ä½¿ç”¨çš„ä»€ä¹ˆç±»å‹çš„ SQL è¿›è¡Œé€»è¾‘å¤„ç†ã€‘ï¼Œæ­¤å¤„åˆ†ææŸ¥è¯¢è¯­å¥çš„æŸ¥è¯¢æ“ä½œ</span>
    <span class="token keyword">return</span> mapperMethod<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>sqlSession<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>sqlSession.selectOne(String, Object)ï¼šæŸ¥è¯¢æ•°æ®</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//.....</span>
    <span class="token comment">// è§£æä¼ å…¥çš„å‚æ•°</span>
    <span class="token class-name">Object</span> param <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">convertArgsToSqlCommandParam</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    result <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>command<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> param<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// DefaultSqlSession.selectList(String, Object)</span>
<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectList</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">,</span> <span class="token class-name">RowBounds</span> rowBounds<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–æ‰§è¡Œè€…å¯¹è±¡</span>
    <span class="token class-name">MappedStatement</span> ms <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">getMappedStatement</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å¼€å§‹æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œå‚æ•°é€šè¿‡ wrapCollection() åŒ…è£…æˆé›†åˆç±»</span>
    <span class="token keyword">return</span> executor<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>ms<span class="token punctuation">,</span> <span class="token function">wrapCollection</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">,</span> rowBounds<span class="token punctuation">,</span> <span class="token class-name">Executor</span><span class="token punctuation">.</span><span class="token constant">NO_RESULT_HANDLER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Executor#query()ï¼š</p><ul><li><p><code>CachingExecutor.query()</code>ï¼šå…ˆæ‰§è¡Œ CachingExecutor å»äºŒçº§ç¼“å­˜è·å–æ•°æ®</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CachingExecutor</span> <span class="token keyword">implements</span> <span class="token class-name">Executor</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Executor</span> delegate<span class="token punctuation">;</span>		<span class="token comment">// åŒ…è£…äº† BaseExecutorï¼ŒäºŒçº§ç¼“å­˜ä¸å­˜åœ¨æ•°æ®è°ƒç”¨ BaseExecutor æŸ¥è¯¢</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>MappedStatement.getBoundSql(parameterObject)</code>ï¼š<strong>æŠŠ parameterObject å°è£…æˆ BoundSql</strong></p><p>æ„é€ å‡½æ•°ä¸­æœ‰ï¼š<code>this.parameterObject = parameterObject</code></p><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/MyBatis-boundSqlå¯¹è±¡.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p><code>CachingExecutor.createCacheKey()</code>ï¼šåˆ›å»ºç¼“å­˜å¯¹è±¡</p></li><li><p><code>ms.getCache()</code>ï¼šè·å–äºŒçº§ç¼“å­˜</p></li><li><p><code>tcm.getObject(cache, key)</code>ï¼šå°è¯•ä»<strong>äºŒçº§ç¼“å­˜</strong>ä¸­è·å–æ•°æ®</p></li></ul></li><li><p><code>BaseExecutor.query()</code>ï¼šäºŒçº§ç¼“å­˜ä¸å­˜åœ¨è¯¥æ•°æ®ï¼Œè°ƒç”¨è¯¥æ–¹æ³•</p><ul><li><code>localCache.getObject(key) </code>ï¼šå°è¯•ä»<strong>æœ¬åœ°ç¼“å­˜ï¼ˆä¸€çº§ç¼“å­˜</strong>ï¼‰è·å–æ•°æ®</li></ul></li><li><p><code>BaseExecutor.queryFromDatabase()</code>ï¼šç¼“å­˜è·å–æ•°æ®å¤±è´¥ï¼Œ<strong>å¼€å§‹ä»æ•°æ®åº“è·å–æ•°æ®ï¼Œå¹¶æ”¾å…¥æœ¬åœ°ç¼“å­˜</strong></p><ul><li><p><code>SimpleExecutor.doQuery()</code>ï¼šæ‰§è¡Œ query</p><ul><li><p><code>configuration.newStatementHandler()</code>ï¼šåˆ›å»º StatementHandler å¯¹è±¡</p><ul><li>æ ¹æ® &lt;select&gt; æ ‡ç­¾çš„ statementType å±æ€§ï¼Œæ ¹æ®å±æ€§é€‰æ‹©åˆ›å»ºå“ªç§å¯¹è±¡</li><li>åˆ¤æ–­ BoundSql æ˜¯å¦è¢«åˆ›å»ºï¼Œæ²¡æœ‰åˆ›å»ºä¼šé‡æ–°å°è£…å‚æ•°ä¿¡æ¯åˆ° BoundSql</li><li><strong>StatementHandler çš„æ„é€ æ–¹æ³•ä¸­ï¼Œåˆ›å»ºäº† ParameterHandler å’Œ ResultSetHandler å¯¹è±¡</strong></li><li><code>interceptorChain.pluginAll(statementHandler)</code>ï¼šæ‹¦æˆªå™¨é“¾</li></ul></li><li><p><code>prepareStatement()</code>ï¼šé€šè¿‡ StatementHandler åˆ›å»º JDBC åŸç”Ÿçš„ Statement å¯¹è±¡</p><ul><li><code>getConnection()</code>ï¼š<strong>è·å– JDBC çš„ Connection å¯¹è±¡</strong></li><li><code>handler.prepare()</code>ï¼šåˆå§‹åŒ– Statement å¯¹è±¡ <ul><li><code>instantiateStatement(Connection connection)</code>ï¼šConnection ä¸­çš„æ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡ <ul><li>è·å–æ™®é€šæ‰§è¡Œè€…å¯¹è±¡ï¼š<code>Connection.createStatement()</code></li><li><strong>è·å–é¢„ç¼–è¯‘æ‰§è¡Œè€…å¯¹è±¡</strong>ï¼š<code>Connection.prepareStatement()</code></li></ul></li></ul></li><li><code>handler.parameterize()</code>ï¼šè¿›è¡Œå‚æ•°çš„è®¾ç½® <ul><li><code>ParameterHandler.setParameters()</code>ï¼š<strong>é€šè¿‡ ParameterHandler è®¾ç½®å‚æ•°</strong><ul><li><code>typeHandler.setParameter()</code>ï¼šåº•å±‚é€šè¿‡ TypeHandler å®ç°ï¼Œå›è°ƒ JDBC çš„æ¥å£è¿›è¡Œè®¾ç½®</li></ul></li></ul></li></ul></li><li><p><code>StatementHandler.query()</code>ï¼š<strong>è°ƒç”¨ JDBC åŸç”Ÿçš„ PreparedStatement æ‰§è¡Œ SQL</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">ResultHandler</span> resultHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å– SQL è¯­å¥</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> boundSql<span class="token punctuation">.</span><span class="token function">getSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    statement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// é€šè¿‡ ResultSetHandler å¯¹è±¡å°è£…ç»“æœé›†ï¼Œæ˜ å°„æˆ JavaBean</span>
    <span class="token keyword">return</span> resultSetHandler<span class="token punctuation">.</span><span class="token function">handleResultSets</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>resultSetHandler.handleResultSets(statement)</code>ï¼šå¤„ç†ç»“æœé›†</p><ul><li><p><code>handleResultSet(rsw, resultMap, multipleResults, null)</code>ï¼šåº•å±‚å›è°ƒ</p><ul><li><p><code>handleRowValues()</code>ï¼šé€è¡Œå¤„ç†æ•°æ®ï¼Œæ ¹æ®æ˜¯å¦é…ç½®äº†&lt;resultMap&gt; å±æ€§é€‰æ‹©æ˜¯å¦ä½¿ç”¨ç®€å•ç»“æœé›†æ˜ å°„</p><ul><li><p>é¦–å…ˆåˆ¤æ–­æ•°æ®æ˜¯å¦è¢«é™åˆ¶è¡Œæ•°ï¼Œç„¶åè¿›è¡Œç»“æœé›†çš„æ˜ å°„</p></li><li><p>æœ€åå°†æ•°æ®å­˜å…¥ ResultHandler å¯¹è±¡ï¼Œåº•å±‚å°±æ˜¯ List é›†åˆ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultResultHandler</span> <span class="token keyword">implements</span> <span class="token class-name">ResultHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>
  	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleResult</span><span class="token punctuation">(</span><span class="token class-name">ResultContext</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getResultObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul></li><li><p><code>return collapseSingleResultList(multipleResults)</code>ï¼šå¯èƒ½å­˜åœ¨å¤šä¸ªç»“æœé›†çš„æƒ…å†µ</p></li></ul></li></ul></li><li><p><code>localCache.putObject(key, list)</code>ï¼š<strong>æ”¾å…¥ä¸€çº§ï¼ˆæœ¬åœ°ï¼‰ç¼“å­˜</strong></p></li></ul></li></ul><p><code>return list.get(0)</code>ï¼šè¿”å›ç»“æœé›†çš„ç¬¬ä¸€ä¸ªæ•°æ®</p><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/MyBatis-æ‰§è¡ŒSQLè¿‡ç¨‹.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><hr><h2 id="æ’ä»¶ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#æ’ä»¶ä½¿ç”¨" aria-hidden="true">#</a> æ’ä»¶ä½¿ç”¨</h2><h3 id="æ’ä»¶åŸç†" tabindex="-1"><a class="header-anchor" href="#æ’ä»¶åŸç†" aria-hidden="true">#</a> æ’ä»¶åŸç†</h3><p>å®ç°åŸç†ï¼šæ’ä»¶æ˜¯æŒ‰ç…§æ’ä»¶é…ç½®é¡ºåºåˆ›å»ºå±‚å±‚åŒ…è£…å¯¹è±¡ï¼Œæ‰§è¡Œç›®æ ‡æ–¹æ³•çš„ä¹‹åï¼ŒæŒ‰ç…§é€†å‘é¡ºåºæ‰§è¡Œï¼ˆæ ˆï¼‰</p><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/MyBatis-æ’ä»¶åŸç†.png" style="zoom:50%;"><p>åœ¨å››å¤§å¯¹è±¡åˆ›å»ºæ—¶ï¼š</p><ul><li>æ¯ä¸ªåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ä¸æ˜¯ç›´æ¥è¿”å›çš„ï¼Œè€Œæ˜¯ <code>interceptorChain.pluginAll(parameterHandler)</code></li><li>è·å–åˆ°æ‰€æœ‰ Interceptorï¼ˆæ’ä»¶éœ€è¦å®ç°çš„æ¥å£ï¼‰ï¼Œè°ƒç”¨ <code>interceptor.plugin(target)</code>è¿”å› target åŒ…è£…åçš„å¯¹è±¡</li><li>æ’ä»¶æœºåˆ¶å¯ä»¥ä½¿ç”¨æ’ä»¶ä¸ºç›®æ ‡å¯¹è±¡åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡å¯ä»¥<strong>æ‹¦æˆªåˆ°å››å¤§å¯¹è±¡çš„æ¯ä¸€ä¸ªæ‰§è¡Œ</strong></li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Intercepts</span><span class="token punctuation">(</span>
		<span class="token punctuation">{</span>
		<span class="token annotation punctuation">@Signature</span><span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token class-name">StatementHandler</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>method<span class="token operator">=</span><span class="token string">&quot;parameterize&quot;</span><span class="token punctuation">,</span>args<span class="token operator">=</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span>Statement</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFirstPlugin</span> <span class="token keyword">implements</span> <span class="token class-name">Interceptor</span><span class="token punctuation">{</span>

	<span class="token comment">//interceptï¼šæ‹¦æˆªç›®æ ‡å¯¹è±¡çš„ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œ</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Invocation</span> invocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MyFirstPlugin...intercept:&quot;</span> <span class="token operator">+</span> invocation<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//åŠ¨æ€çš„æ”¹å˜ä¸€ä¸‹sqlè¿è¡Œçš„å‚æ•°ï¼šä»¥å‰1å·å‘˜å·¥ï¼Œå®é™…ä»æ•°æ®åº“æŸ¥è¯¢11å·å‘˜å·¥</span>
		<span class="token class-name">Object</span> target <span class="token operator">=</span> invocation<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰æ‹¦æˆªåˆ°çš„å¯¹è±¡ï¼š&quot;</span> <span class="token operator">+</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//æ‹¿åˆ°ï¼šStatementHandler==&gt;ParameterHandler===&gt;parameterObject</span>
		<span class="token comment">//æ‹¿åˆ°targetçš„å…ƒæ•°æ®</span>
		<span class="token class-name">MetaObject</span> metaObject <span class="token operator">=</span> <span class="token class-name">SystemMetaObject</span><span class="token punctuation">.</span><span class="token function">forObject</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Object</span> value <span class="token operator">=</span> metaObject<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token string">&quot;parameterHandler.parameterObject&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;sqlè¯­å¥ç”¨çš„å‚æ•°æ˜¯ï¼š&quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//ä¿®æ”¹å®Œsqlè¯­å¥è¦ç”¨çš„å‚æ•°</span>
		metaObject<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;parameterHandler.parameterObject&quot;</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//æ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
		<span class="token class-name">Object</span> proceed <span class="token operator">=</span> invocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//è¿”å›æ‰§è¡Œåçš„è¿”å›å€¼</span>
		<span class="token keyword">return</span> proceed<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// pluginï¼šåŒ…è£…ç›®æ ‡å¯¹è±¡çš„ï¼Œä¸ºç›®æ ‡å¯¹è±¡åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">plugin</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//å¯ä»¥å€ŸåŠ© Plugin çš„ wrap æ–¹æ³•æ¥ä½¿ç”¨å½“å‰ Interceptor åŒ…è£…æˆ‘ä»¬ç›®æ ‡å¯¹è±¡</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MyFirstPlugin...plugin:mybatiså°†è¦åŒ…è£…çš„å¯¹è±¡&quot;</span> <span class="token operator">+</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Object</span> wrap <span class="token operator">=</span> <span class="token class-name">Plugin</span><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//è¿”å›ä¸ºå½“å‰targetåˆ›å»ºçš„åŠ¨æ€ä»£ç†</span>
		<span class="token keyword">return</span> wrap<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// setPropertiesï¼šå°†æ’ä»¶æ³¨å†Œæ—¶çš„propertyå±æ€§è®¾ç½®è¿›æ¥</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setProperties</span><span class="token punctuation">(</span><span class="token class-name">Properties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ’ä»¶é…ç½®çš„ä¿¡æ¯ï¼š&quot;</span> <span class="token operator">+</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--pluginsï¼šæ³¨å†Œæ’ä»¶  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span> <span class="token attr-name">interceptor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mybatis.dao.MyFirstPlugin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123456<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="åˆ†é¡µæ’ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆ†é¡µæ’ä»¶" aria-hidden="true">#</a> åˆ†é¡µæ’ä»¶</h3><figure><img src="https://seazean.oss-cn-beijing.aliyuncs.com/img/Frame/åˆ†é¡µä»‹ç».png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>åˆ†é¡µå¯ä»¥å°†å¾ˆå¤šæ¡ç»“æœè¿›è¡Œåˆ†é¡µæ˜¾ç¤ºã€‚å¦‚æœå½“å‰åœ¨ç¬¬ä¸€é¡µï¼Œåˆ™æ²¡æœ‰ä¸Šä¸€é¡µã€‚å¦‚æœå½“å‰åœ¨æœ€åä¸€é¡µï¼Œåˆ™æ²¡æœ‰ä¸‹ä¸€é¡µï¼Œéœ€è¦æ˜ç¡®å½“å‰æ˜¯ç¬¬å‡ é¡µï¼Œè¿™ä¸€é¡µä¸­æ˜¾ç¤ºå¤šå°‘æ¡ç»“æœã€‚</li><li>MyBatis æ˜¯ä¸å¸¦åˆ†é¡µåŠŸèƒ½çš„ï¼Œå¦‚æœæƒ³å®ç°åˆ†é¡µåŠŸèƒ½ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™ LIMIT è¯­å¥ï¼Œä¸åŒçš„æ•°æ®åº“å®ç°åˆ†é¡µçš„ SQL è¯­å¥ä¹Ÿæ˜¯ä¸åŒï¼Œæ‰‹å†™åˆ†é¡µ æˆæœ¬è¾ƒé«˜ã€‚</li><li>PageHelperï¼šç¬¬ä¸‰æ–¹åˆ†é¡µåŠ©æ‰‹ï¼Œå°†å¤æ‚çš„åˆ†é¡µæ“ä½œè¿›è¡Œå°è£…ï¼Œä»è€Œè®©åˆ†é¡µåŠŸèƒ½å˜å¾—éå¸¸ç®€å•</li></ul><hr><h3 id="åˆ†é¡µæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#åˆ†é¡µæ“ä½œ" aria-hidden="true">#</a> åˆ†é¡µæ“ä½œ</h3><p>å¼€å‘æ­¥éª¤ï¼š</p><ol><li><p>å¯¼å…¥ PageHelper çš„ Maven åæ ‡</p></li><li><p>åœ¨ MyBatis æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½® PageHelper æ’ä»¶</p><p>æ³¨æ„ï¼šåˆ†é¡µåŠ©æ‰‹çš„æ’ä»¶é…ç½®åœ¨é€šç”¨ Mapper ä¹‹å‰</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span> <span class="token attr-name">interceptor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.github.pagehelper.PageInterceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- æŒ‡å®šæ–¹è¨€ --&gt;</span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>.........<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ä¸ MySQL åˆ†é¡µæŸ¥è¯¢é¡µæ•°è®¡ç®—å…¬å¼ä¸åŒ</p><p><code>static &lt;E&gt; Page&lt;E&gt; startPage(int pageNum, int pageSize)</code>ï¼špageNumç¬¬å‡ é¡µï¼ŒpageSizeé¡µé¢å¤§å°</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//ç¬¬ä¸€é¡µï¼šæ˜¾ç¤º2æ¡æ•°æ®</span>
    <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> students <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">&quot;StudentMapper.selectAll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Student</span> student <span class="token operator">:</span> students<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="å‚æ•°è·å–" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è·å–" aria-hidden="true">#</a> å‚æ•°è·å–</h3><p>PageInfoæ„é€ æ–¹æ³•ï¼š</p><ul><li><code>PageInfo&lt;Student&gt; info = new PageInfo&lt;&gt;(list)</code> : list æ˜¯ SQL æ‰§è¡Œè¿”å›çš„ç»“æœé›†åˆï¼Œå‚è€ƒä¸Šä¸€èŠ‚</li></ul><p>PageInfoç›¸å…³APIï¼š</p><ol><li>startPage()ï¼šè®¾ç½®åˆ†é¡µå‚æ•°</li><li>PageInfoï¼šåˆ†é¡µç›¸å…³å‚æ•°åŠŸèƒ½ç±»ã€‚</li><li>getTotal()ï¼šè·å–æ€»æ¡æ•°</li><li>getPages()ï¼šè·å–æ€»é¡µæ•°</li><li>getPageNum()ï¼šè·å–å½“å‰é¡µ</li><li>getPageSize()ï¼šè·å–æ¯é¡µæ˜¾ç¤ºæ¡æ•°</li><li>getPrePage()ï¼šè·å–ä¸Šä¸€é¡µ</li><li>getNextPage()ï¼šè·å–ä¸‹ä¸€é¡µ</li><li>isIsFirstPage()ï¼šè·å–æ˜¯å¦æ˜¯ç¬¬ä¸€é¡µ</li><li>isIsLastPage()ï¼šè·å–æ˜¯å¦æ˜¯æœ€åä¸€é¡µ</li></ol><hr></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/rockbenben/LearnData/edit/main/docs/Springå…¨å®¶æ¡¶/MyBatis.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><!----></div></footer><nav class="vp-page-nav"><!----><a class="vp-link nav-link next" href="/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/Spring.html"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">Spring<!----></div></a></nav><div id="comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><div class="wl-reaction"><div class="wl-reaction-title">å·²åˆ°è¾¾æ–‡ç« åº•éƒ¨ï¼Œæ¬¢è¿ç•™è¨€ã€è¡¨æƒ…äº’åŠ¨~</div><ul class="wl-reaction-list"><!--[--><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/twemoji/13.1.0/72x72/1f44d.png" alt="èµä¸€ä¸ª"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text">èµä¸€ä¸ª</div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/twemoji/13.1.0/72x72/1f44f.png" alt="æ”¯æŒä¸‹"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text">æ”¯æŒä¸‹</div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/twemoji/13.1.0/72x72/1f60e.png" alt="æœ‰ç‚¹é…·"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text">æœ‰ç‚¹é…·</div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/twemoji/13.1.0/72x72/1f602.png" alt="å•¥ç©æ„"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text">å•¥ç©æ„</div></li><li class="wl-reaction-item"><div class="wl-reaction-img"><img src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-y/twemoji/13.1.0/72x72/1f635-200d-1f4ab.png" alt="çœ‹ä¸æ‡‚"><div class="wl-reaction-votes">0</div></div><div class="wl-reaction-text">çœ‹ä¸æ‡‚</div></li><!--]--></ul></div><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">æ˜µç§°</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">é‚®ç®±</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">ç½‘å€</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="è¯·ç•™è¨€ã€‚(å¡«å†™é‚®ç®±å¯åœ¨è¢«å›å¤æ—¶æ”¶åˆ°é‚®ä»¶æé†’)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>é¢„è§ˆ:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="è¡¨æƒ…" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="è¡¨æƒ…åŒ…"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="ä¸Šä¼ å›¾ç‰‡"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="é¢„è§ˆ"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if--> Â å­—</div><button type="button" class="wl-btn">ç™»å½•</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->æäº¤<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="æœç´¢è¡¨æƒ…åŒ…"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> è¯„è®º</div><ul class="wl-sort"><!--[--><li class="active">æŒ‰æ­£åº</li><li class="">æŒ‰å€’åº</li><li class="">æŒ‰çƒ­åº¦</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.15.5</div></div></div><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-3aac6385.js" defer></script>
    <!-- çœ‹æ¿å¨˜åŒºå— -->
    <script src="/live2d-widget/autoload.js"></script>
    <!-- End çœ‹æ¿å¨˜åŒºå— -->
    <script src="https://oss.newzone.top/instantpage.min.js" type="module"></script>
  </body>
</html>
